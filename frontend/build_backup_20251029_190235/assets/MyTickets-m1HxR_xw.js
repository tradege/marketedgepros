import{c as e,j as t,M as s,a as r,C as l}from"./index-BM6g71aI.js";import{b as a,L as o}from"./react-vendor-ClcElYEu.js";import{L as n}from"./Layout-BG2wnx4x.js";import{S as i}from"./SEO-x3s2ITi0.js";import{a as c}from"./utils-DBSmTWZT.js";import{F as d}from"./funnel-BAhGcGpZ.js";import{L as m}from"./loader-gG3HYbIp.js";import{C as x}from"./clock-U2tG2k2z.js";import"./log-out-1--zrNn3.js";import"./user-ebcudyrh.js";import"./menu-DYbjHmct.js";import"./mail-U8J9Mkxc.js";import"./phone-CU9J_BtP.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=e("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);function u(){const[e,u]=a.useState([]),[b,g]=a.useState(!0),[h,j]=a.useState("all");a.useEffect(()=>{y()},[h]);const y=()=>{return e=null,t=null,s=function*(){try{g(!0);const e=localStorage.getItem("token"),t="all"!==h?{status:h}:{},s=yield c.get("https://marketedgepros.com/api/v1/support/tickets/my",{headers:{Authorization:`Bearer ${e}`},params:t});u(s.data.tickets)}catch(e){console.error("Error fetching tickets:",e)}finally{g(!1)}},new Promise((r,l)=>{var a=e=>{try{n(s.next(e))}catch(t){l(t)}},o=e=>{try{n(s.throw(e))}catch(t){l(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);n((s=s.apply(e,t)).next())});var e,t,s},f=e=>{const t={low:"bg-green-500/10 text-green-400 border-green-500/30",medium:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",high:"bg-orange-500/10 text-orange-400 border-orange-500/30",urgent:"bg-red-500/10 text-red-400 border-red-500/30"};return t[e]||t.medium},v={total:e.length,open:e.filter(e=>"open"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status||"waiting_customer"===e.status).length,resolved:e.filter(e=>"resolved"===e.status||"closed"===e.status).length};return t.jsxs(n,{children:[t.jsx(i,{title:"My Support Tickets",description:"View and manage your support tickets",keywords:"support tickets, help, customer service"}),t.jsxs("section",{className:"relative pt-32 pb-12 overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl"})]}),t.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4",children:["My Support ",t.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Tickets"})]}),t.jsx("p",{className:"text-xl text-gray-300",children:"Track and manage all your support requests"})]}),t.jsxs(o,{to:"/support/create-ticket",className:"hidden md:flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/50 transition-all",children:[t.jsx(p,{className:"w-5 h-5"}),"New Ticket"]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6",children:[t.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Total Tickets"}),t.jsx("p",{className:"text-3xl font-bold text-white",children:v.total})]}),t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-blue-500/30 rounded-xl p-6",children:[t.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Open"}),t.jsx("p",{className:"text-3xl font-bold text-blue-400",children:v.open})]}),t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-yellow-500/30 rounded-xl p-6",children:[t.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"In Progress"}),t.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:v.in_progress})]}),t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-green-500/30 rounded-xl p-6",children:[t.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Resolved"}),t.jsx("p",{className:"text-3xl font-bold text-green-400",children:v.resolved})]})]})]})]}),t.jsx("section",{className:"py-12 bg-slate-900",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(d,{className:"w-5 h-5 text-gray-400"}),t.jsx("button",{onClick:()=>j("all"),className:"px-4 py-2 rounded-lg font-medium transition-all "+("all"===h?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:"All"}),t.jsx("button",{onClick:()=>j("open"),className:"px-4 py-2 rounded-lg font-medium transition-all "+("open"===h?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:"Open"}),t.jsx("button",{onClick:()=>j("in_progress"),className:"px-4 py-2 rounded-lg font-medium transition-all "+("in_progress"===h?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:"In Progress"}),t.jsx("button",{onClick:()=>j("resolved"),className:"px-4 py-2 rounded-lg font-medium transition-all "+("resolved"===h?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:"Resolved"})]}),b?t.jsx("div",{className:"flex justify-center items-center py-20",children:t.jsx(m,{className:"w-8 h-8 text-blue-500 animate-spin"})}):0===e.length?t.jsxs("div",{className:"text-center py-20",children:[t.jsx(p,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"No tickets found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:"all"===h?"You haven't created any support tickets yet.":`You don't have any ${h.replace("_"," ")} tickets.`}),t.jsxs(o,{to:"/support/create-ticket",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/50 transition-all",children:[t.jsx(p,{className:"w-5 h-5"}),"Create Your First Ticket"]})]}):t.jsx("div",{className:"space-y-4",children:e.map(e=>{const a=(e=>{const t={open:{color:"bg-blue-500/10 text-blue-400 border-blue-500/30",icon:x,label:"Open"},in_progress:{color:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",icon:s,label:"In Progress"},waiting_customer:{color:"bg-purple-500/10 text-purple-400 border-purple-500/30",icon:l,label:"Waiting for You"},resolved:{color:"bg-green-500/10 text-green-400 border-green-500/30",icon:r,label:"Resolved"},closed:{color:"bg-gray-500/10 text-gray-400 border-gray-500/30",icon:r,label:"Closed"}};return t[e]||t.open})(e.status),n=a.icon;return t.jsx(o,{to:`/support/ticket/${e.ticket_number}?email=${e.email}`,className:"block bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-blue-500/50 transition-all group",children:t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsxs("span",{className:"font-mono text-sm text-gray-400",children:["#",e.ticket_number]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${a.color} flex items-center gap-1.5`,children:[t.jsx(n,{className:"w-3.5 h-3.5"}),a.label]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${f(e.priority)}`,children:[e.priority.charAt(0).toUpperCase()+e.priority.slice(1)," Priority"]})]}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2 group-hover:text-blue-400 transition-colors",children:e.subject}),t.jsx("p",{className:"text-gray-400 mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[t.jsxs("span",{children:["Category: ",t.jsx("span",{className:"text-gray-400",children:e.category})]}),t.jsxs("span",{children:["Created: ",t.jsx("span",{className:"text-gray-400",children:(i=e.created_at,new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.message_count>0&&t.jsxs("span",{className:"flex items-center gap-1.5 text-blue-400",children:[t.jsx(s,{className:"w-4 h-4"}),e.message_count," ",1===e.message_count?"message":"messages"]})]})]})})},e.id);var i})})]})})]})}export{u as default};
