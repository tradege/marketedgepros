var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,d=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,i=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&d(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&d(e,a,t[a]);return e},n=(e,l)=>t(e,a(l));import{j as o}from"./index-BxzbOCZI.js";import{u as c,b as m}from"./react-vendor-ClcElYEu.js";import{S as h}from"./StatsCard-CRkxGlFa.js";import{D as u}from"./DataTable-CNVLB_9F.js";import{a as x}from"./utils-DBSmTWZT.js";import g from"./AdminLayout-DEEwB8lT.js";import{U as f}from"./users-8MJsDRfo.js";import{D as p}from"./dollar-sign-DHftor3V.js";import{T as b}from"./trending-up-CobHApwb.js";import{F as j}from"./file-text-Chq5howg.js";import"./shield-DmglrLC2.js";import"./log-out-DiU7Wcrm.js";import"./credit-card-D64os8h_.js";import"./chart-column-aWwjLcOy.js";import"./settings-BD4A2bZn.js";import"./chevron-right-D92a0WHu.js";function v(){const e=c(),[t,a]=m.useState(null),[l,s]=m.useState(!0),[r,d]=m.useState(null);m.useEffect(()=>{v()},[]);const v=()=>{return e=null,t=null,l=function*(){try{s(!0);const e=localStorage.getItem("access_token"),t=yield x.get("/api/v1/admin/dashboard/stats",{headers:{Authorization:`Bearer ${e}`}});a(t.data),d(null)}catch(e){d("Failed to load dashboard data")}finally{s(!1)}},new Promise((a,s)=>{var r=e=>{try{i(l.next(e))}catch(t){s(t)}},d=e=>{try{i(l.throw(e))}catch(t){s(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,d);i((l=l.apply(e,t)).next())});var e,t,l};if(l)return o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(r)return o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"text-xl text-red-500",children:r})});if(!t)return null;const w=[{title:"Total Users",value:t.users.total.toString(),subtitle:`${t.users.active} active`,icon:f,color:"primary",trend:"up",trendValue:"+12.5%"},{title:"Total Revenue",value:`$${t.revenue.total.toLocaleString()}`,subtitle:`$${t.revenue.monthly.toLocaleString()} this month`,icon:p,color:"success",trend:"up",trendValue:"+12.5%"},{title:"Active Challenges",value:t.challenges.active.toString(),subtitle:`${t.challenges.completed} completed`,icon:b,color:"info",trend:"up",trendValue:"+8.2%"},{title:"Pending KYC",value:t.users.pending_kyc.toString(),subtitle:"Requires review",icon:j,color:"warning"}],y=t.recent_users.map(e=>n(i({},e),{created_at:new Date(e.created_at).toLocaleDateString()})),N=t.recent_payments.map(e=>n(i({},e),{amount:`$${e.amount.toFixed(2)}`,created_at:new Date(e.created_at).toLocaleDateString()}));return o.jsx(g,{children:o.jsxs("div",{className:"space-y-6 p-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white dark:text-white",children:"Admin Dashboard"}),o.jsx("p",{className:"mt-2 text-sm text-gray-300 dark:text-gray-400",children:"Overview of platform metrics and activity"})]}),o.jsx("button",{onClick:()=>e("/admin/analytics"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold shadow-md",children:"ðŸ“Š View Analytics"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((e,t)=>o.jsx(h,i({},e),t))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 p-6 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white dark:text-white",children:"Completed"}),o.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.challenges.completed}),o.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${t.challenges.completed/t.challenges.total*100||0}%`}})}),o.jsxs("p",{className:"text-sm text-gray-300 dark:text-gray-400 mt-2",children:[(t.challenges.completed/t.challenges.total*100||0).toFixed(0),"% success rate"]})]}),o.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 p-6 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white dark:text-white",children:"Failed"}),o.jsx("p",{className:"text-3xl font-bold text-red-600",children:t.challenges.failed}),o.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${t.challenges.failed/t.challenges.total*100||0}%`}})}),o.jsxs("p",{className:"text-sm text-gray-300 dark:text-gray-400 mt-2",children:[(t.challenges.failed/t.challenges.total*100||0).toFixed(0),"% failure rate"]})]}),o.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 p-6 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white dark:text-white",children:"Funded"}),o.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.challenges.funded}),o.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${t.challenges.funded/t.challenges.total*100||0}%`}})}),o.jsxs("p",{className:"text-sm text-gray-300 dark:text-gray-400 mt-2",children:[(t.challenges.funded/t.challenges.total*100||0).toFixed(0),"% funded accounts"]})]})]}),o.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-white/10 dark:border-gray-700",children:o.jsx("h2",{className:"text-xl font-semibold text-white dark:text-white",children:"Recent Users"})}),o.jsx(u,{columns:[{field:"name",headerName:"Name",flex:1},{field:"email",headerName:"Email",flex:1},{field:"role",headerName:"Role",width:120},{field:"status",headerName:"Status",width:100},{field:"created_at",headerName:"Joined",width:150}],rows:y,pageSize:5})]}),o.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 rounded-lg shadow",children:[o.jsx("div",{className:"p-6 border-b border-white/10 dark:border-gray-700",children:o.jsx("h2",{className:"text-xl font-semibold text-white dark:text-white",children:"Recent Payments"})}),o.jsx(u,{columns:[{field:"user_id",headerName:"User ID",width:100},{field:"amount",headerName:"Amount",width:120},{field:"type",headerName:"Type",flex:1},{field:"status",headerName:"Status",width:120},{field:"created_at",headerName:"Date",width:150}],rows:N,pageSize:5})]})]})})}export{v as default};
