var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,o=(e,s,t)=>new Promise((r,a)=>{var l=e=>{try{o(t.next(e))}catch(s){a(s)}},n=e=>{try{o(t.throw(e))}catch(s){a(s)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);o((t=t.apply(e,s)).next())});import{c as i,u as d,j as c,C as m}from"./index-DqQJTl6K.js";import{u,b as x,L as p}from"./react-vendor-ClcElYEu.js";import{L as b}from"./Layout-Dg94Y9A9.js";import{L as h}from"./lock-Xr7i1UXb.js";import{M as g}from"./mail-ZeP3EQhF.js";import"./utils-DBSmTWZT.js";import"./log-out-Bem9VypZ.js";import"./user-DPfkRfei.js";import"./menu-alChhF6D.js";import"./phone-CalkIIhy.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=i("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);function j(){const e=u(),{login:i,login2FA:j,error:y,clearError:v}=d(),[N,w]=x.useState({email:"",password:""}),[k,S]=x.useState(!1),[O,P]=x.useState(null),[L,C]=x.useState(""),[E,F]=x.useState(!1),q=e=>{var o,i;w((o=((e,s)=>{for(var t in s||(s={}))a.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))l.call(s,t)&&n(e,t,s[t]);return e})({},N),i={[e.target.name]:e.target.value},s(o,t(i)))),v()},A=s=>o(null,null,function*(){var t;s.preventDefault(),F(!0);try{const s=(null==(t=(yield j(O,L)).user)?void 0:t.role)||"user";e("supermaster"===s||"admin_master"===s||"master"===s?"/admin":"agent"===s?"/agent":"user"===s?"/":"/dashboard")}catch(r){}finally{F(!1)}});return k?c.jsx(b,{children:c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-12",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:c.jsx(h,{className:"w-8 h-8 text-blue-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Two-Factor Authentication"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Enter the 6-digit code from your authenticator app"})]}),y&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[c.jsx(m,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800",children:y})]}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",value:L,onChange:e=>{C(e.target.value),v()},placeholder:"000000",maxLength:"6",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest",required:!0,autoFocus:!0})}),c.jsx("button",{type:"submit",disabled:E||6!==L.length,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Verifying...":"Verify"}),c.jsx("button",{type:"button",onClick:()=>{S(!1),C(""),v()},className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Back to Login"})]})]})})})}):c.jsx(b,{children:c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-12",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:c.jsx(f,{className:"w-8 h-8 text-blue-600"})}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your MarketEdgePros account"})]}),y&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[c.jsx(m,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800",children:y})]}),c.jsxs("form",{onSubmit:s=>o(null,null,function*(){var t;s.preventDefault(),F(!0);try{const s=yield i(N.email,N.password);if(s.requires2FA)S(!0),P(s.userId);else{const r=(null==(t=s.user)?void 0:t.role)||"user";e("supermaster"===r||"admin_master"===r||"master"===r?"/admin":"agent"===r?"/agent":"user"===r?"/":"/dashboard")}}catch(r){}finally{F(!1)}}),className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"email",name:"email",value:N.email,onChange:q,placeholder:"you@example.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"password",name:"password",value:N.password,onChange:q,placeholder:"••••••••",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),c.jsx(p,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),c.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Signing in...":"Sign In"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",c.jsx(p,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})})]})})})})}export{j as default};
