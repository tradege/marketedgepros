var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,n=(e,t)=>{for(var s in t||(t={}))l.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))r.call(t,s)&&i(e,s,t[s]);return e},d=(e,a)=>t(e,s(a)),c=(e,t,s)=>new Promise((a,l)=>{var r=e=>{try{n(s.next(e))}catch(t){l(t)}},i=e=>{try{n(s.throw(e))}catch(t){l(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((s=s.apply(e,t)).next())});import{g as o,h as x,j as m,C as u,a as h,d as p}from"./index-CNgcY1MJ.js";import{b}from"./react-vendor-ClcElYEu.js";import j from"./TraderLayout-BWAIVC1L.js";import{P as g}from"./plus-DqfrNf0g.js";import{D as w}from"./dollar-sign-Dp8pNjLp.js";import{C as f}from"./clock-BJfDzEOT.js";import"./utils-DBSmTWZT.js";import"./log-out-Xj2_WwYs.js";import"./wallet-BMZnrADh.js";import"./trending-up-wYtPDKDL.js";import"./file-text-DhFivypl.js";import"./user-B4c_Apne.js";import"./menu-BgBsiAzf.js";function y(){var e,t,s,a;const l=o(),[r,i]=b.useState([]),[y,v]=b.useState({available_balance:0,total_withdrawn:0,pending_withdrawals:0,completed_count:0}),[N,_]=b.useState(!0),[k,P]=b.useState(!1),[D,S]=b.useState(!1),[C,$]=b.useState(null),[q,F]=b.useState({amount:"",method:"bank_transfer",accountDetails:""});b.useEffect(()=>{O()},[]);const O=()=>c(null,null,function*(){try{_(!0),$(null);const e=yield x.get("/api/v1/traders/withdrawals");e.data&&(i(e.data.withdrawals||[]),v(e.data.statistics||{available_balance:0,total_withdrawn:0,pending_withdrawals:0,completed_count:0}))}catch(e){$("Failed to load withdrawal data. Please try again."),l.error("Failed to load withdrawal data")}finally{_(!1)}}),W=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":case"approved":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-slate-700/50 text-gray-100"}},A=e=>{switch(e){case"completed":return m.jsx(h,{className:"w-5 h-5 text-green-600"});case"processing":case"approved":case"pending":return m.jsx(f,{className:"w-5 h-5 text-yellow-600"});case"rejected":return m.jsx(p,{className:"w-5 h-5 text-red-600"});default:return null}},E=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return N?m.jsx(j,{children:m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),m.jsx("p",{className:"text-gray-300 mt-4",children:"Loading withdrawals..."})]})})}):m.jsx(j,{children:m.jsxs("div",{className:"min-h-screen bg-slate-900",children:[m.jsx("div",{className:"bg-slate-800/50 border-b border-white/10",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Withdrawals"}),m.jsx("p",{className:"text-gray-300 mt-2",children:"Request and track your payouts"})]}),m.jsxs("button",{onClick:()=>P(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2",children:[m.jsx(g,{className:"w-5 h-5"}),"New Withdrawal"]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[C&&m.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[m.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),m.jsx("p",{className:"text-red-700 text-sm mt-1",children:C})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[m.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300",children:"Available Balance"}),m.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",(null==(e=y.available_balance)?void 0:e.toFixed(2))||"0.00"]})]}),m.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:m.jsx(w,{className:"w-6 h-6 text-green-600"})})]})}),m.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300",children:"Total Withdrawn"}),m.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",(null==(t=y.total_withdrawn)?void 0:t.toFixed(2))||"0.00"]})]}),m.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:m.jsx(h,{className:"w-6 h-6 text-blue-600"})})]})}),m.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300",children:"Pending"}),m.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",(null==(s=y.pending_withdrawals)?void 0:s.toFixed(2))||"0.00"]})]}),m.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:m.jsx(f,{className:"w-6 h-6 text-yellow-600"})})]})}),m.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300",children:"Completed"}),m.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:y.completed_count||0}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total requests"})]}),m.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:m.jsx(h,{className:"w-6 h-6 text-purple-600"})})]})})]}),m.jsxs("div",{className:"bg-slate-800/50 rounded-lg shadow-md overflow-hidden",children:[m.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Withdrawal History"})}),0===r.length?m.jsxs("div",{className:"p-12 text-center",children:[m.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-300 font-medium",children:"No withdrawals yet"}),m.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Click "New Withdrawal" to request your first payout'})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-slate-900",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Method"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Processed"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Notes"})]})}),m.jsx("tbody",{className:"bg-slate-800/50 divide-y divide-gray-200",children:r.map(e=>{var t,s,a;return m.jsxs("tr",{className:"hover:bg-slate-900",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:E(e.requested_at)}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:["$",null==(t=e.amount)?void 0:t.toFixed(2)]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:null==(s=e.method)?void 0:s.replace("_"," ").toUpperCase()}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${W(e.status)}`,children:[A(e.status),null==(a=e.status)?void 0:a.toUpperCase()]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.processed_at?E(e.processed_at):"-"}),m.jsx("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs truncate",children:e.notes||"-"})]},e.id)})})]})})]})]}),k&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-slate-800/50 rounded-lg max-w-md w-full p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Request Withdrawal"}),m.jsxs("form",{onSubmit:e=>c(null,null,function*(){var t,s;e.preventDefault();const a=parseFloat(q.amount);if(!a||a<=0)l.error("Please enter a valid amount");else if(a<100)l.error("Minimum withdrawal amount is $100");else if(a>y.available_balance)l.error(`Insufficient balance. Available: $${y.available_balance.toFixed(2)}`);else if(q.accountDetails&&""!==q.accountDetails.trim())try{S(!0),$(null),yield x.post("/api/v1/traders/withdrawals",{amount:a,method:q.method,account_details:q.accountDetails}),yield O(),P(!1),F({amount:"",method:"bank_transfer",accountDetails:""}),l.success("Withdrawal request submitted successfully!")}catch(r){const e=(null==(s=null==(t=r.response)?void 0:t.data)?void 0:s.error)||"Failed to submit withdrawal request. Please try again.";l.error(e)}finally{S(!1)}else l.error("Please provide account details")}),children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Amount ($)"}),m.jsx("input",{type:"number",step:"0.01",min:"100",max:y.available_balance,value:q.amount,onChange:e=>F(d(n({},q),{amount:e.target.value})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount",required:!0}),m.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Available: $",null==(a=y.available_balance)?void 0:a.toFixed(2)," | Minimum: $100"]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Withdrawal Method"}),m.jsxs("select",{value:q.method,onChange:e=>F(d(n({},q),{method:e.target.value})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[m.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),m.jsx("option",{value:"paypal",children:"PayPal"}),m.jsx("option",{value:"wire",children:"Wire Transfer"}),m.jsx("option",{value:"crypto",children:"Cryptocurrency"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Account Details"}),m.jsx("textarea",{value:q.accountDetails,onChange:e=>F(d(n({},q),{accountDetails:e.target.value})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Enter your account details (account number, PayPal email, wallet address, etc.)",required:!0})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>{P(!1),F({amount:"",method:"bank_transfer",accountDetails:""})},className:"flex-1 px-4 py-2 border border-white/20 text-gray-200 rounded-lg hover:bg-slate-900 font-medium transition-colors duration-200",disabled:D,children:"Cancel"}),m.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:D,children:D?"Submitting...":"Submit Request"})]})]})]})})]})})}export{y as default};
