var e=(e,t,s)=>new Promise((a,l)=>{var r=e=>{try{n(s.next(e))}catch(t){l(t)}},i=e=>{try{n(s.throw(e))}catch(t){l(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((s=s.apply(e,t)).next())});import{j as t,a as s,C as a}from"./index-DqQJTl6K.js";import{u as l,f as r,b as i,L as n}from"./react-vendor-ClcElYEu.js";import{L as o}from"./Layout-Dg94Y9A9.js";import{a as c}from"./utils-DBSmTWZT.js";import{M as d}from"./mail-ZeP3EQhF.js";import{R as m}from"./refresh-cw-BswhBQOW.js";import"./log-out-Bem9VypZ.js";import"./user-DPfkRfei.js";import"./menu-alChhF6D.js";import"./phone-CalkIIhy.js";const u="https://marketedgepros.com/api/v1";function x(){var x;const h=l(),f=(null==(x=r().state)?void 0:x.email)||"",[p,b]=i.useState(f),[g,j]=i.useState(""),[y,v]=i.useState(!1),[N,w]=i.useState(""),[k,S]=i.useState(!1),[E,V]=i.useState(!1),[P,C]=i.useState(0);i.useEffect(()=>{if(P>0){const e=setTimeout(()=>C(P-1),1e3);return()=>clearTimeout(e)}},[P]);return k?t.jsx(o,{children:t.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-12",children:t.jsx("div",{className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:t.jsx(s,{className:"w-8 h-8 text-green-600"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Your email has been successfully verified. Redirecting to login..."}),t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]})})})}):t.jsx(o,{children:t.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-12",children:t.jsx("div",{className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:t.jsx(d,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Verify Your Email"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"We've sent a 6-digit verification code to"}),t.jsx("p",{className:"text-blue-600 font-medium mt-1",children:p})]}),N&&t.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[t.jsx(a,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-800",children:N})]}),t.jsxs("form",{onSubmit:t=>e(null,null,function*(){var e,s;t.preventDefault(),w(""),v(!0);try{yield c.post(`${u}/auth/verify-email`,{email:p,code:g});S(!0),setTimeout(()=>{h("/login",{state:{message:"Email verified successfully! Please login."}})},2e3)}catch(a){w((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||"Verification failed. Please check your code and try again.")}finally{v(!1)}}),className:"space-y-6",children:[!f&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsx("input",{type:"email",value:p,onChange:e=>b(e.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),t.jsx("input",{type:"text",value:g,onChange:e=>{const t=e.target.value.replace(/\D/g,"");t.length<=6&&(j(t),w(""))},placeholder:"000000",maxLength:"6",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest font-mono",required:!0,autoFocus:!0}),t.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Enter the 6-digit code from your email"})]}),t.jsx("button",{type:"submit",disabled:y||6!==g.length,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Verifying...":"Verify Email"})]}),t.jsxs("div",{className:"mt-6 text-center space-y-4",children:[t.jsxs("button",{onClick:()=>e(null,null,function*(){var e,t;if(!(P>0)){w(""),V(!0);try{yield c.post(`${u}/auth/resend-verification`,{email:p}),C(120),alert("Verification code sent! Please check your email.")}catch(s){w((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Failed to resend code. Please try again.")}finally{V(!1)}}}),disabled:E||P>0,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(m,{className:"w-4 h-4 "+(E?"animate-spin":"")}),P>0?`Resend code in ${P}s`:E?"Sending...":"Resend verification code"]}),t.jsx("p",{className:"text-sm text-gray-600",children:t.jsx(n,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Back to Login"})})]})]})})})})}export{x as default};
