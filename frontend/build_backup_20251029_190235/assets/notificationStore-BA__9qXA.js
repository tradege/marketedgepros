var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,l=(t,e)=>{for(var n in e||(e={}))i.call(e,n)&&o(t,n,e[n]);if(r)for(var n of r(e))a.call(e,n)&&o(t,n,e[n]);return t},c=(t,r)=>e(t,n(r)),s=(t,e,n)=>new Promise((r,i)=>{var a=t=>{try{l(n.next(t))}catch(e){i(e)}},o=t=>{try{l(n.throw(t))}catch(e){i(e)}},l=t=>t.done?r(t.value):Promise.resolve(t.value).then(a,o);l((n=n.apply(t,e)).next())});import{h as u}from"./index-BMK3oVvE.js";import{c as f}from"./utils-DBSmTWZT.js";const d=f((t,e)=>({notifications:[],unreadCount:0,preferences:null,loading:!1,error:null,currentPage:1,totalPages:1,perPage:50,filters:{type:null,is_read:null,priority:null},fetchNotifications:(...n)=>s(null,[...n],function*(n=1,r={}){t({loading:!0,error:null});try{const i=new URLSearchParams(l({page:n.toString(),per_page:e().perPage.toString()},r)),a=yield u.get(`/notifications?${i}`);t({notifications:a.data.notifications,currentPage:a.data.page,totalPages:a.data.pages,filters:r,loading:!1})}catch(i){t({error:i.message,loading:!1})}}),fetchUnreadCount:()=>s(null,null,function*(){try{const e=yield u.get("/notifications/unread-count");t({unreadCount:e.data.count})}catch(e){}}),markAsRead:e=>s(null,null,function*(){try{yield u.post(`/notifications/${e}/read`),t(t=>({notifications:t.notifications.map(t=>t.id===e?c(l({},t),{is_read:!0}):t),unreadCount:Math.max(0,t.unreadCount-1)}))}catch(n){}}),markAllAsRead:()=>s(null,null,function*(){try{yield u.post("/notifications/read-all"),t(t=>({notifications:t.notifications.map(t=>c(l({},t),{is_read:!0})),unreadCount:0}))}catch(e){}}),deleteNotification:e=>s(null,null,function*(){try{yield u.delete(`/notifications/${e}`),t(t=>({notifications:t.notifications.filter(t=>t.id!==e)}))}catch(n){}}),fetchPreferences:()=>s(null,null,function*(){try{const e=yield u.get("/notifications/preferences");t({preferences:e.data})}catch(e){}}),updatePreferences:e=>s(null,null,function*(){try{const n=yield u.put("/notifications/preferences",e);return t({preferences:n.data.preferences}),!0}catch(n){return!1}}),addNotification:e=>{t(t=>({notifications:[e,...t.notifications],unreadCount:t.unreadCount+1}))},reset:()=>{t({notifications:[],unreadCount:0,preferences:null,loading:!1,error:null,currentPage:1,totalPages:1,filters:{type:null,is_read:null,priority:null}})}}));export{d as u};
