import{h as e,j as t,a as s}from"./index-BR0m5PO4.js";import{b as a}from"./react-vendor-ClcElYEu.js";import r from"./AgentLayout-BV1oJgjH.js";import{D as l}from"./download-DP38O0zJ.js";import{D as n}from"./dollar-sign-B1ArLjNl.js";import{T as i}from"./trending-up-CJSu9Lu_.js";import{C as c}from"./clock-CPtcaxWr.js";import{C as d}from"./calendar-BHR6i2qN.js";import"./utils-DBSmTWZT.js";import"./log-out-DkBPYaep.js";import"./users-Dbdra69E.js";import"./chart-column-DPONFvej.js";import"./user-npSaNj6H.js";import"./menu-oN7bJEN8.js";function m(){const[m,o]=a.useState([]),[x,h]=a.useState(!0),[p,u]=a.useState("all"),[g,j]=a.useState({totalEarned:0,pendingCommissions:0,paidCommissions:0,thisMonth:0});a.useEffect(()=>{f()},[]);const f=()=>{return t=null,s=null,a=function*(){var t,s;try{h(!0);const a=yield e.get("/api/v1/commissions"),r=(a.data.commissions||[]).map(e=>{var t,s,a,r;return{id:e.id,date:e.created_at,trader:{name:(null==(s=null==(t=e.referral)?void 0:t.referred_user)?void 0:s.name)||"N/A",email:(null==(r=null==(a=e.referral)?void 0:a.referred_user)?void 0:r.email)||"N/A"},type:"enrollment",program:`Challenge #${e.challenge_id}`,amount:e.commission_amount,rate:e.commission_rate,status:e.status,payout_date:e.paid_at}});o(r);const l=(yield e.get("/api/v1/commissions/stats")).data;j({totalEarned:l.total_earned||0,pendingCommissions:l.pending_balance||0,paidCommissions:(null==(t=l.paid)?void 0:t.amount)||0,thisMonth:(null==(s=l.pending)?void 0:s.amount)||0})}catch(a){o([]),j({totalEarned:0,pendingCommissions:0,paidCommissions:0,thisMonth:0})}finally{h(!1)}},new Promise((e,r)=>{var l=e=>{try{i(a.next(e))}catch(t){r(t)}},n=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,n);i((a=a.apply(t,s)).next())});var t,s,a},y=m.filter(e=>{if("all"===p)return!0;const t=new Date(e.date),s=new Date;if("this_month"===p)return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear();if("last_month"===p){const e=new Date(s.getFullYear(),s.getMonth()-1);return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}return"this_year"!==p||t.getFullYear()===s.getFullYear()}),N=e=>{switch(e){case"enrollment":return"bg-blue-100 text-blue-800";case"profit_share":return"bg-green-100 text-green-800";case"renewal":return"bg-purple-100 text-purple-800";default:return"bg-slate-700/50 text-gray-100"}},w=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-slate-700/50 text-gray-100"}};return x?t.jsx(r,{children:t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),t.jsx("p",{className:"text-gray-300 mt-4",children:"Loading commissions..."})]})})}):t.jsx(r,{children:t.jsxs("div",{className:"min-h-screen bg-slate-900",children:[t.jsx("div",{className:"bg-slate-800/50 border-b border-white/10",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Commissions"}),t.jsx("p",{className:"text-gray-300 mt-2",children:"Track your earnings and payouts"})]}),t.jsxs("button",{onClick:()=>{const e=[["Date","Trader","Type","Program","Amount","Rate","Status","Payout Date"],...y.map(e=>[new Date(e.date).toLocaleDateString(),e.trader.name,e.type,e.program,e.amount,`${e.rate}%`,e.status,e.payout_date?new Date(e.payout_date).toLocaleDateString():"Pending"])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`commissions-${(new Date).toISOString().split("T")[0]}.csv`,a.click()},className:"btn btn-primary flex items-center gap-2",children:[t.jsx(l,{className:"w-5 h-5"}),"Export"]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"card",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-300",children:"Total Earned"}),t.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",g.totalEarned.toLocaleString()]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(n,{className:"w-6 h-6 text-green-600"})})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-300",children:"This Month"}),t.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",g.thisMonth.toLocaleString()]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(i,{className:"w-6 h-6 text-blue-600"})})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-300",children:"Pending"}),t.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",g.pendingCommissions.toLocaleString()]})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-yellow-600"})})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-300",children:"Paid Out"}),t.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",g.paidCommissions.toLocaleString()]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(s,{className:"w-6 h-6 text-green-600"})})]})})]}),t.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-sm p-4 mb-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(d,{className:"w-5 h-5 text-gray-400"}),t.jsxs("select",{value:p,onChange:e=>u(e.target.value),className:"input",children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"this_month",children:"This Month"}),t.jsx("option",{value:"last_month",children:"Last Month"}),t.jsx("option",{value:"this_year",children:"This Year"})]})]})}),t.jsxs("div",{className:"bg-slate-800/50 rounded-lg shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-900 border-b border-white/10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Trader"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Program"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Rate"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Payout Date"})]})}),t.jsx("tbody",{className:"bg-slate-800/50 divide-y divide-gray-200",children:y.map(e=>t.jsxs("tr",{className:"hover:bg-slate-900",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:new Date(e.date).toLocaleDateString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-white",children:e.trader.name}),t.jsx("div",{className:"text-sm text-gray-400",children:e.trader.email})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(e.type)}`,children:e.type.replace("_"," ")})}),t.jsx("td",{className:"px-6 py-4 text-sm text-white",children:e.program}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:[e.rate,"%"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-white",children:["$",e.amount]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(e.status)}`,children:e.status})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:e.payout_date?new Date(e.payout_date).toLocaleDateString():"Pending"})]},e.id))})]})}),0===y.length&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-300",children:"No commissions found"})})]}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(n,{className:"w-5 h-5 text-blue-600"})}),t.jsx("h3",{className:"font-bold text-white",children:"Enrollment Commission"})]}),t.jsx("p",{className:"text-sm text-gray-300",children:"Earn commission when a trader enrolls in a program through your referral link."}),t.jsx("p",{className:"text-lg font-bold text-blue-600 mt-2",children:"30% Rate"})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(i,{className:"w-5 h-5 text-green-600"})}),t.jsx("h3",{className:"font-bold text-white",children:"Profit Share Commission"})]}),t.jsx("p",{className:"text-sm text-gray-300",children:"Earn commission from the profits generated by your traders on funded accounts."}),t.jsx("p",{className:"text-lg font-bold text-green-600 mt-2",children:"10% Rate"})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx(s,{className:"w-5 h-5 text-purple-600"})}),t.jsx("h3",{className:"font-bold text-white",children:"Renewal Commission"})]}),t.jsx("p",{className:"text-sm text-gray-300",children:"Earn commission when your traders renew their challenge or upgrade their account."}),t.jsx("p",{className:"text-lg font-bold text-purple-600 mt-2",children:"20% Rate"})]})]})]})]})})}export{m as default};
