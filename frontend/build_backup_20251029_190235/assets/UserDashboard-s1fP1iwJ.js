var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;import{h as l,j as d}from"./index-CNgcY1MJ.js";import{b as n}from"./react-vendor-ClcElYEu.js";import{S as i}from"./StatsCard-ljcqYDPC.js";import o from"./UserLayout-BDqpbZHE.js";import{C as c}from"./clock-BJfDzEOT.js";import{D as x}from"./dollar-sign-Dp8pNjLp.js";import{T as g}from"./trending-up-wYtPDKDL.js";import{T as m}from"./trophy-CkKU6n0o.js";import"./utils-DBSmTWZT.js";function u(){const[e,u]=n.useState(!0),[p,h]=n.useState(null),[b,f]=n.useState(null);n.useEffect(()=>{y()},[]);const y=()=>{return e=null,t=null,r=function*(){var e,t;try{u(!0),h(null);const e=yield l.get("/users/dashboard");f(e.data)}catch(r){h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.error)||"Failed to load dashboard data")}finally{u(!1)}},new Promise((a,s)=>{var l=e=>{try{n(r.next(e))}catch(t){s(t)}},d=e=>{try{n(r.throw(e))}catch(t){s(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,d);n((r=r.apply(e,t)).next())});var e,t,r};if(e)return d.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(p)return d.jsx("div",{className:"mb-4",children:d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsx("span",{className:"block sm:inline",children:p})})});if(!b)return null;const{user:j,statistics:v,recent_challenges:N}=b,k=[{title:"Active Challenges",value:v.active_challenges.toString(),subtitle:"In progress",icon:c,color:"primary"},{title:"Total Profit",value:`$${v.total_profit.toLocaleString()}`,subtitle:`${v.funded_challenges} funded account${1!==v.funded_challenges?"s":""}`,icon:x,color:"success",trend:v.total_profit>0?"up":void 0,trendValue:v.total_profit>0?`+$${v.total_profit.toLocaleString()}`:void 0},{title:"Success Rate",value:`${v.success_rate}%`,subtitle:`${v.passed_challenges} passed / ${v.failed_challenges} failed`,icon:g,color:"info"},{title:"Funded Accounts",value:v.funded_challenges.toString(),subtitle:v.funded_challenges>0?"Congratulations!":"Keep trading!",icon:m,color:"warning"}],w=e=>{if(!e.initial_balance||!e.current_balance)return 0;const t=e.profit/(.08*e.initial_balance)*100;return Math.min(Math.max(t,0),100)},_=e=>{const t=null==e?void 0:e.toLowerCase();return"active"===t?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"passed"===t?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"failed"===t?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"funded"===t?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"pending"===t?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"};return d.jsx(o,{children:d.jsxs("div",{children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome back, ",j.first_name,"! ðŸ‘‹"]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Here's your trading overview"})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:k.map((e,l)=>d.jsx(i,((e,l)=>{for(var d in l||(l={}))r.call(l,d)&&s(e,d,l[d]);if(t)for(var d of t(l))a.call(l,d)&&s(e,d,l[d]);return e})({},e),l))}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Challenges"}),0===N.length?d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:d.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8",children:"No challenges yet. Purchase a program to start your trading journey!"})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(e=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.program_name}),d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${_(e.status)}`,children:e.status.toUpperCase()})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progress"}),d.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[Math.round(w(e)),"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 h-2 rounded-full transition-all duration-300",style:{width:`${w(e)}%`}})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Balance"}),d.jsxs("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:["$",e.current_balance.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Profit/Loss"}),d.jsxs("p",{className:"text-lg font-semibold "+(e.profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",e.profit.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Phase"}),d.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.phase||"N/A"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Started"}),d.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]})]})]},e.id))})]})})}export{u as default};
