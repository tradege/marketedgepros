var e=(e,s,t)=>new Promise((r,l)=>{var a=e=>{try{n(t.next(e))}catch(s){l(s)}},i=e=>{try{n(t.throw(e))}catch(s){l(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,s)).next())});import{c as s,j as t}from"./index-CyU3HRDM.js";import{u as r,b as l,L as a}from"./react-vendor-DvHQdeg3.js";import{a as i}from"./utils-BQl1bh9w.js";import{L as n}from"./Layout-Bu57l5_u.js";import{T as d}from"./trending-up-CcHRgmV5.js";import{U as o}from"./users-Dx-e0QM-.js";import{D as c}from"./dollar-sign-D1_bh2C4.js";import{E as x}from"./external-link-CBI9WnU-.js";import{P as m}from"./plus-BX2BPCs6.js";import{C as h}from"./check-BfpC8MqV.js";import{C as b}from"./copy-DlCn17Ir.js";import"./menu-CQPIq17m.js";import"./mail-DyD7dFv1.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=s("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),u=s("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),g="https://marketedgepros.com/api/v1";function j(){const s=r(),[j,f]=l.useState({stats:{total_clicks:0,total_conversions:0,total_earnings:0,pending_commission:0,approved_commission:0,paid_commission:0},links:[],recent_referrals:[]}),[N,y]=l.useState(!0),[v,w]=l.useState(!1),[k,_]=l.useState(""),[C,F]=l.useState(!1),[S,$]=l.useState(null);l.useEffect(()=>{L()},[]);const L=()=>e(null,null,function*(){var e;const t=localStorage.getItem("token");if(t)try{const e=yield i.get(`${g}/affiliate/dashboard`,{headers:{Authorization:`Bearer ${t}`}});f(e.data)}catch(r){404===(null==(e=r.response)?void 0:e.status)&&s("/affiliate"),console.error("Failed to fetch dashboard:",r)}finally{y(!1)}else s("/login?redirect=/affiliate/dashboard")});if(N)return t.jsx(n,{children:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:t.jsx("div",{className:"text-xl text-white",children:"Loading dashboard..."})})});const P=j.stats||{};return t.jsx(n,{children:t.jsx("div",{className:"min-h-screen bg-slate-900 py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Affiliate Dashboard"}),t.jsx("p",{className:"text-gray-400",children:"Track your performance and manage your affiliate links"})]}),t.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-500/10 to-blue-600/5 backdrop-blur-sm border border-blue-500/20 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:t.jsx(u,{className:"w-6 h-6 text-blue-400"})}),t.jsx(d,{className:"w-5 h-5 text-blue-400"})]}),t.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:P.total_clicks||0}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Clicks"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-500/10 to-purple-600/5 backdrop-blur-sm border border-purple-500/20 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:t.jsx(o,{className:"w-6 h-6 text-purple-400"})}),t.jsx(d,{className:"w-5 h-5 text-purple-400"})]}),t.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:P.total_conversions||0}),t.jsx("div",{className:"text-sm text-gray-400",children:"Conversions"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-500/10 to-green-600/5 backdrop-blur-sm border border-green-500/20 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-green-400"})}),t.jsx(d,{className:"w-5 h-5 text-green-400"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",(P.total_earnings||0).toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Earnings"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-500/10 to-orange-600/5 backdrop-blur-sm border border-orange-500/20 rounded-xl",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-orange-400"})})}),t.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",(P.pending_commission||0).toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Pending Commission"})]})]}),t.jsxs("div",{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Commission Breakdown"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Pending"}),t.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["$",(P.pending_commission||0).toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Approved"}),t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",(P.approved_commission||0).toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Paid"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:["$",(P.paid_commission||0).toFixed(2)]})]})]}),t.jsxs(a,{to:"/affiliate/payout",className:"mt-6 inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white font-semibold hover:from-blue-600 hover:to-purple-700 transition",children:["Request Payout",t.jsx(x,{className:"w-4 h-4 ml-2"})]})]}),t.jsxs("div",{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Affiliate Links"}),t.jsxs("button",{onClick:()=>F(!C),className:"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-500/30 transition flex items-center gap-2",children:[t.jsx(m,{className:"w-4 h-4"}),"Create New Link"]})]}),C&&t.jsx("form",{onSubmit:s=>e(null,null,function*(){s.preventDefault();const e=localStorage.getItem("token");w(!0);try{yield i.post(`${g}/affiliate/links`,{name:k},{headers:{Authorization:`Bearer ${e}`}}),_(""),F(!1),L()}catch(t){console.error("Failed to create link:",t)}finally{w(!1)}}),className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx("input",{type:"text",value:k,onChange:e=>_(e.target.value),placeholder:"Link name (e.g., 'Facebook Campaign')",className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",required:!0}),t.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white font-semibold hover:from-blue-600 hover:to-purple-700 transition disabled:opacity-50",children:v?"Creating...":"Create"})]})}),t.jsx("div",{className:"space-y-4",children:j.links&&j.links.length>0?j.links.map(e=>t.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:t.jsx(p,{className:"w-5 h-5 text-blue-400"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-semibold",children:e.name}),t.jsxs("div",{className:"text-sm text-gray-400",children:["Code: ",e.code]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-white font-semibold",children:[e.clicks," clicks"]}),t.jsxs("div",{className:"text-sm text-gray-400",children:[e.conversions," conversions"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:e.full_url,readOnly:!0,className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded text-gray-300 text-sm"}),t.jsx("button",{onClick:()=>(e=>{navigator.clipboard.writeText(e),$(e),setTimeout(()=>$(null),2e3)})(e.full_url),className:"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-500/30 transition flex items-center gap-2",children:S===e.full_url?t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"w-4 h-4"}),"Copied!"]}):t.jsxs(t.Fragment,{children:[t.jsx(b,{className:"w-4 h-4"}),"Copy"]})})]})]},e.id)):t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx(p,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No affiliate links yet. Create your first one!"})]})})]}),t.jsxs("div",{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Recent Referrals"}),j.recent_referrals&&j.recent_referrals.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/10",children:[t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Date"}),t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Link"}),t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Status"}),t.jsx("th",{className:"text-right py-3 px-4 text-gray-400 font-semibold",children:"Commission"})]})}),t.jsx("tbody",{children:j.recent_referrals.map(e=>t.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[t.jsx("td",{className:"py-3 px-4 text-gray-300",children:new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"py-3 px-4 text-gray-300",children:e.link_name}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("converted"===e.status?"bg-green-500/20 text-green-400":"pending"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"),children:e.status})}),t.jsxs("td",{className:"py-3 px-4 text-right text-white font-semibold",children:["$",(e.commission||0).toFixed(2)]})]},e.id))})]})}):t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No referrals yet. Start sharing your links!"})]})]})]})})})}export{j as default};
