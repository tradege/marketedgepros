var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&r(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&r(e,a,s[a]);return e},c=(e,t)=>s(e,a(t));import{j as o,a as d,C as m}from"./index-usu0IHMe.js";import{b as p}from"./react-vendor-DvHQdeg3.js";import{u}from"./notificationStore-1dILjhg9.js";import x from"./UserLayout-Cw2N8FYJ.js";import{L as h}from"./loader-C24ghKIq.js";import{B as b}from"./bell-JTrlb0ng.js";import{M as f}from"./mail-BX1znGwT.js";import{S as j}from"./save-CugCPHn9.js";import"./utils-BQl1bh9w.js";const g=[{key:"withdrawal",label:"Withdrawals",description:"Updates about your withdrawal requests"},{key:"commission",label:"Commissions",description:"Notifications about earned commissions"},{key:"kyc",label:"KYC Verification",description:"Updates about your KYC status"},{key:"payment",label:"Payments",description:"Payment confirmations and updates"},{key:"challenge",label:"Challenges",description:"Challenge progress and results"},{key:"system",label:"System",description:"System announcements and updates"}];function y(){const{preferences:e,loading:s,fetchPreferences:a,updatePreferences:t}=u(),[i,l]=p.useState(null),[r,y]=p.useState(!1),[N,v]=p.useState(!1),[w,k]=p.useState(null);p.useEffect(()=>{a()},[a]),p.useEffect(()=>{e&&l(e)},[e]);const P=e=>s=>{l(a=>c(n({},a),{in_app:c(n({},a.in_app),{[e]:s.target.checked})}))},_=e=>s=>{l(a=>c(n({},a),{email:c(n({},a.email),{[e]:s.target.checked})}))};return s||!i?o.jsx("div",{className:"max-w-3xl mx-auto p-6",children:o.jsx("div",{className:"flex justify-center p-12",children:o.jsx(h,{className:"w-8 h-8 text-purple-500 animate-spin"})})}):o.jsx(x,{children:o.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Notification Settings"}),o.jsx("p",{className:"text-gray-400",children:"Manage how you receive notifications"})]}),N&&o.jsxs("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/50 rounded-lg flex items-center gap-3",children:[o.jsx(d,{className:"w-5 h-5 text-green-400"}),o.jsx("p",{className:"text-green-400",children:"Preferences saved successfully!"})]}),w&&o.jsxs("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg flex items-center gap-3",children:[o.jsx(m,{className:"w-5 h-5 text-red-400"}),o.jsx("p",{className:"text-red-400",children:w})]}),o.jsxs("div",{className:"mb-6 bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(b,{className:"w-5 h-5 text-purple-400"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"In-App Notifications"})]}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Receive notifications within the application"}),o.jsx("div",{className:"space-y-4",children:g.map(e=>o.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-white/5 cursor-pointer transition-colors",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-white font-medium",children:e.label}),o.jsx("p",{className:"text-sm text-gray-400",children:e.description})]}),o.jsxs("div",{className:"relative inline-block w-12 h-6 transition duration-200 ease-in-out",children:[o.jsx("input",{type:"checkbox",checked:i.in_app[e.key]||!1,onChange:P(e.key),className:"opacity-0 w-0 h-0 peer"}),o.jsx("span",{className:"absolute cursor-pointer inset-0 bg-gray-600 rounded-full transition-colors peer-checked:bg-purple-600"}),o.jsx("span",{className:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-6"})]})]},e.key))})]}),o.jsxs("div",{className:"mb-6 bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(f,{className:"w-5 h-5 text-purple-400"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Email Notifications"})]}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Receive notifications via email"}),o.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-white/5 cursor-pointer transition-colors mb-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-white font-medium",children:"Enable Email Notifications"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Turn on/off all email notifications"})]}),o.jsxs("div",{className:"relative inline-block w-12 h-6 transition duration-200 ease-in-out",children:[o.jsx("input",{type:"checkbox",checked:i.settings.email_enabled||!1,onChange:e=>{l(s=>c(n({},s),{settings:c(n({},s.settings),{email_enabled:e.target.checked})}))},className:"opacity-0 w-0 h-0 peer"}),o.jsx("span",{className:"absolute cursor-pointer inset-0 bg-gray-600 rounded-full transition-colors peer-checked:bg-purple-600"}),o.jsx("span",{className:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-6"})]})]}),o.jsx("div",{className:"border-t border-white/10 my-6"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"text-white font-medium mb-4",children:"Email Frequency"}),o.jsx("div",{className:"space-y-3",children:[{value:"instant",label:"Instant",description:"Receive emails immediately"},{value:"daily",label:"Daily Digest",description:"Receive a daily summary"},{value:"weekly",label:"Weekly Digest",description:"Receive a weekly summary"}].map(e=>o.jsxs("label",{className:"flex items-center p-3 rounded-lg cursor-pointer transition-colors "+(i.settings.email_enabled?"hover:bg-white/5":"opacity-50 cursor-not-allowed"),children:[o.jsx("input",{type:"radio",name:"email_frequency",value:e.value,checked:i.settings.email_frequency===e.value,onChange:()=>{return s=e.value,void l(e=>c(n({},e),{settings:c(n({},e.settings),{email_frequency:s})}));var s},disabled:!i.settings.email_enabled,className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-white",children:e.label}),o.jsx("p",{className:"text-sm text-gray-400",children:e.description})]})]},e.value))})]}),o.jsx("div",{className:"border-t border-white/10 my-6"}),o.jsx("div",{className:"space-y-4",children:g.map(e=>o.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors "+(i.settings.email_enabled?"hover:bg-white/5":"opacity-50 cursor-not-allowed"),children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-white font-medium",children:e.label}),o.jsx("p",{className:"text-sm text-gray-400",children:e.description})]}),o.jsxs("div",{className:"relative inline-block w-12 h-6 transition duration-200 ease-in-out",children:[o.jsx("input",{type:"checkbox",checked:i.email[e.key]||!1,onChange:_(e.key),disabled:!i.settings.email_enabled,className:"opacity-0 w-0 h-0 peer"}),o.jsx("span",{className:"absolute cursor-pointer inset-0 rounded-full transition-colors "+(i.settings.email_enabled?"bg-gray-600 peer-checked:bg-purple-600":"bg-gray-700")}),o.jsx("span",{className:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-6"})]})]},e.key))})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>{return e=null,s=null,a=function*(){y(!0),v(!1),k(null),(yield t(i))?(v(!0),setTimeout(()=>v(!1),3e3)):k("Failed to save preferences"),y(!1)},new Promise((t,i)=>{var l=e=>{try{n(a.next(e))}catch(s){i(s)}},r=e=>{try{n(a.throw(e))}catch(s){i(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,r);n((a=a.apply(e,s)).next())});var e,s,a},disabled:r,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg hover:from-purple-700 hover:to-purple-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?o.jsxs(o.Fragment,{children:[o.jsx(h,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(j,{className:"w-5 h-5"}),"Save Preferences"]})})})]})})}export{y as default};
