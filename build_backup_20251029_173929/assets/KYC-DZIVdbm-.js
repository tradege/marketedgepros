var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,i=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&n(e,t,s[t]);if(a)for(var t of a(s))l.call(s,t)&&n(e,t,s[t]);return e},d=(e,a)=>s(e,t(a));import{c,u as o,j as m,a as x,C as u,e as h}from"./index-xawegGrD.js";import{u as b,b as p}from"./react-vendor-DvHQdeg3.js";import j from"./UserLayout-2gE2oFGg.js";import{U as f}from"./user-DAU5ePjx.js";import{F as g}from"./file-text-CVceof2t.js";import{U as y}from"./upload-tWsO5Swr.js";import{A as N}from"./arrow-right-CK9QQKxq.js";import"./utils-BQl1bh9w.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=c("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);function w(){const e=b(),{user:s}=o(),[t,a]=p.useState({document_type:"passport",document_number:"",address:"",city:"",postal_code:"",country:""}),[r,l]=p.useState({document_front:null,document_back:null,proof_of_address:null,selfie:null}),[n,c]=p.useState({}),[w,_]=p.useState(!1),[k,C]=p.useState(null),[D,P]=p.useState(!1),S=e=>{a(d(i({},t),{[e.target.name]:e.target.value}))},O=(e,s)=>{const t=e.target.files[0];if(t){l(d(i({},r),{[s]:t}));const e=new FileReader;e.onloadend=()=>{c(d(i({},n),{[s]:e.result}))},e.readAsDataURL(t)}};return"approved"===(null==s?void 0:s.kyc_status)?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:m.jsxs("div",{className:"max-w-md w-full card text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:m.jsx(x,{className:"w-8 h-8 text-green-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"KYC Verified"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Your identity has been verified. You have full access to all features."}),m.jsx("button",{onClick:()=>e("/dashboard"),className:"btn btn-primary w-full",children:"Go to Dashboard"})]})}):D?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:m.jsxs("div",{className:"max-w-md w-full card text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:m.jsx(x,{className:"w-8 h-8 text-green-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"KYC Submitted!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Your documents have been submitted successfully. We'll review them within 24-48 hours and notify you via email."}),m.jsx("button",{onClick:()=>e("/dashboard"),className:"btn btn-primary w-full",children:"Go to Dashboard"})]})}):m.jsx(j,{children:m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("div",{className:"bg-white border-b border-gray-200",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"KYC Verification"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Complete your identity verification to unlock all features"})]})}),m.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["pending"===(null==s?void 0:s.kyc_status)&&m.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[m.jsx(u,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-yellow-900",children:"Verification Pending"}),m.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Your documents are being reviewed. This usually takes 24-48 hours."})]})]}),"rejected"===(null==s?void 0:s.kyc_status)&&m.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[m.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-red-900",children:"Verification Rejected"}),m.jsx("p",{className:"text-sm text-red-800 mt-1",children:"Your documents were rejected. Please submit new documents with clear, readable images."})]})]}),m.jsxs("form",{onSubmit:e=>{return s=null,a=null,l=function*(){var s,a;e.preventDefault(),_(!0),C(null);try{const e={};for(const[s,t]of Object.entries(r))if(t){const a=new FormData;a.append("file",t),a.append("file_type",s);const r=yield h.upload(a);e[s]=r.data.file_url}i(i({},t),e),yield new Promise(e=>setTimeout(e,1500)),P(!0)}catch(l){C((null==(a=null==(s=l.response)?void 0:s.data)?void 0:a.error)||"Failed to submit KYC. Please try again.")}finally{_(!1)}},new Promise((t,r)=>{var n=s=>{try{d(l.next(s))}catch(e){r(e)}},i=s=>{try{d(l.throw(s))}catch(e){r(e)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,i);d((l=l.apply(s,a)).next())});var s,a,l},className:"space-y-6",children:[m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:m.jsx(f,{className:"w-5 h-5 text-primary-600"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Information"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type"}),m.jsxs("select",{name:"document_type",value:t.document_type,onChange:S,className:"input",required:!0,children:[m.jsx("option",{value:"passport",children:"Passport"}),m.jsx("option",{value:"drivers_license",children:"Driver's License"}),m.jsx("option",{value:"national_id",children:"National ID"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Number"}),m.jsx("input",{type:"text",name:"document_number",value:t.document_number,onChange:S,className:"input",required:!0})]})]})]}),m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:m.jsx(v,{className:"w-5 h-5 text-green-600"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Address"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),m.jsx("input",{type:"text",name:"address",value:t.address,onChange:S,className:"input",required:!0})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),m.jsx("input",{type:"text",name:"city",value:t.city,onChange:S,className:"input",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),m.jsx("input",{type:"text",name:"postal_code",value:t.postal_code,onChange:S,className:"input",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),m.jsx("input",{type:"text",name:"country",value:t.country,onChange:S,className:"input",required:!0})]})]})]})]}),m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:m.jsx(g,{className:"w-5 h-5 text-purple-600"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Document Uploads"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Document (Front) *"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:n.document_front?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.document_front,alt:"Document front",className:"max-h-40 mx-auto rounded"}),m.jsx("button",{type:"button",onClick:()=>{l(d(i({},r),{document_front:null})),c(d(i({},n),{document_front:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:m.jsx(u,{className:"w-4 h-4"})})]}):m.jsxs("label",{className:"cursor-pointer",children:[m.jsx(y,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload"}),m.jsx("input",{type:"file",accept:"image/*",onChange:e=>O(e,"document_front"),className:"hidden",required:!0})]})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Document (Back)"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:n.document_back?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.document_back,alt:"Document back",className:"max-h-40 mx-auto rounded"}),m.jsx("button",{type:"button",onClick:()=>{l(d(i({},r),{document_back:null})),c(d(i({},n),{document_back:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:m.jsx(u,{className:"w-4 h-4"})})]}):m.jsxs("label",{className:"cursor-pointer",children:[m.jsx(y,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload"}),m.jsx("input",{type:"file",accept:"image/*",onChange:e=>O(e,"document_back"),className:"hidden"})]})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof of Address *"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:n.proof_of_address?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.proof_of_address,alt:"Proof of address",className:"max-h-40 mx-auto rounded"}),m.jsx("button",{type:"button",onClick:()=>{l(d(i({},r),{proof_of_address:null})),c(d(i({},n),{proof_of_address:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:m.jsx(u,{className:"w-4 h-4"})})]}):m.jsxs("label",{className:"cursor-pointer",children:[m.jsx(y,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Utility bill or bank statement"}),m.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>O(e,"proof_of_address"),className:"hidden",required:!0})]})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selfie with ID *"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:n.selfie?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.selfie,alt:"Selfie",className:"max-h-40 mx-auto rounded"}),m.jsx("button",{type:"button",onClick:()=>{l(d(i({},r),{selfie:null})),c(d(i({},n),{selfie:null}))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:m.jsx(u,{className:"w-4 h-4"})})]}):m.jsxs("label",{className:"cursor-pointer",children:[m.jsx(y,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Hold your ID next to your face"}),m.jsx("input",{type:"file",accept:"image/*",onChange:e=>O(e,"selfie"),className:"hidden",required:!0})]})})]})]})]}),k&&m.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[m.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),m.jsx("p",{className:"text-sm text-red-800",children:k})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"btn btn-secondary flex-1",children:"Cancel"}),m.jsxs("button",{type:"submit",disabled:w,className:"btn btn-primary flex-1 flex items-center justify-center gap-2 disabled:opacity-50",children:[w?"Submitting...":"Submit for Verification",m.jsx(N,{className:"w-4 h-4"})]})]})]})]})]})})}export{w as default};
