var e=(e,t,s)=>new Promise((a,l)=>{var r=e=>{try{d(s.next(e))}catch(t){l(t)}},o=e=>{try{d(s.throw(e))}catch(t){l(t)}},d=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,o);d((s=s.apply(e,t)).next())});import{j as t,a as s,S as a}from"./index-BpA4a7fq.js";import{u as l,b as r}from"./react-vendor-DvHQdeg3.js";import{a as o}from"./utils-BQl1bh9w.js";import{L as d}from"./Layout-DQ1aqNAF.js";import{C as i}from"./clock-CrEgI34F.js";import{D as n}from"./dollar-sign-DZEpYYM0.js";import{C as c}from"./credit-card-zEz5AoYa.js";import"./log-out-BWg0X_lj.js";import"./menu-CRHi4vxm.js";import"./mail-B3BbTSid.js";const x="https://marketedgepros.com/api/v1";function m(){const m=l(),[u,b]=r.useState({pending:0,approved:0,paid:0,available:0}),[p,h]=r.useState([]),[g,y]=r.useState(!0),[j,f]=r.useState(!1),[v,N]=r.useState(!1),[w,k]=r.useState("paypal"),[S,P]=r.useState(""),[$,q]=r.useState(""),[A,C]=r.useState("");r.useEffect(()=>{F()},[]);const F=()=>e(null,null,function*(){var e;const t=localStorage.getItem("token");if(t)try{const[e,s]=yield Promise.all([o.get(`${x}/affiliate/balance`,{headers:{Authorization:`Bearer ${t}`}}),o.get(`${x}/affiliate/payouts`,{headers:{Authorization:`Bearer ${t}`}})]);b(e.data.balance),h(s.data.payouts)}catch(s){404===(null==(e=s.response)?void 0:e.status)&&m("/affiliate"),console.error("Failed to fetch payout data:",s)}finally{y(!1)}else m("/login?redirect=/affiliate/payout")});if(g)return t.jsx(d,{children:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:t.jsx("div",{className:"text-xl text-white",children:"Loading payout information..."})})});const B=u.available>=50;return t.jsx(d,{children:t.jsx("div",{className:"min-h-screen bg-slate-900 py-12",children:t.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Payout Management"}),t.jsx("p",{className:"text-gray-400",children:"Request payouts and view your payment history"})]}),t.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"p-6 bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 backdrop-blur-sm border border-yellow-500/20 rounded-xl",children:[t.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center mb-4",children:t.jsx(i,{className:"w-6 h-6 text-yellow-400"})}),t.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",u.pending.toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Pending"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-500/10 to-green-600/5 backdrop-blur-sm border border-green-500/20 rounded-xl",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mb-4",children:t.jsx(s,{className:"w-6 h-6 text-green-400"})}),t.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",u.approved.toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Approved"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-500/10 to-blue-600/5 backdrop-blur-sm border border-blue-500/20 rounded-xl",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center mb-4",children:t.jsx(n,{className:"w-6 h-6 text-blue-400"})}),t.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",u.paid.toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Paid"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-500/10 to-purple-600/5 backdrop-blur-sm border border-purple-500/20 rounded-xl",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-4",children:t.jsx(c,{className:"w-6 h-6 text-purple-400"})}),t.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",u.available.toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Available"})]})]}),t.jsxs("div",{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Request Payout"}),t.jsxs("p",{className:"text-gray-400",children:["Minimum payout amount: $",50]})]}),!v&&t.jsxs("button",{onClick:()=>N(!0),disabled:!B,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white font-semibold hover:from-blue-600 hover:to-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[t.jsx(a,{className:"w-5 h-5"}),"Request Payout"]})]}),!B&&!v&&t.jsxs("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-yellow-400",children:["You need at least $",50," in available balance to request a payout. Current available: $",u.available.toFixed(2)]}),$&&t.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400",children:$}),A&&t.jsx("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400",children:A}),v&&t.jsxs("form",{onSubmit:t=>e(null,null,function*(){var e,s;t.preventDefault();const a=localStorage.getItem("token");f(!0),q(""),C("");try{yield o.post(`${x}/affiliate/payouts/request`,{method:w,details:S},{headers:{Authorization:`Bearer ${a}`}}),C("Payout request submitted successfully!"),N(!1),P(""),F()}catch(l){q((null==(s=null==(e=l.response)?void 0:e.data)?void 0:s.error)||"Failed to request payout")}finally{f(!1)}}),className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Method"}),t.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[t.jsx("option",{value:"paypal",children:"PayPal"}),t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),t.jsx("option",{value:"crypto",children:"Cryptocurrency"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["paypal"===w&&"PayPal Email","bank_transfer"===w&&"Bank Account Details","crypto"===w&&"Crypto Wallet Address"]}),t.jsx("textarea",{value:S,onChange:e=>P(e.target.value),placeholder:"paypal"===w?"your@email.com":"bank_transfer"===w?"Bank name, Account number, Routing number":"Wallet address",rows:3,className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg text-blue-400 text-sm",children:[t.jsx("strong",{children:"Amount to be paid:"})," $",u.available.toFixed(2)]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{type:"submit",disabled:j,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white font-semibold hover:from-blue-600 hover:to-purple-700 transition disabled:opacity-50",children:j?"Submitting...":"Submit Request"}),t.jsx("button",{type:"button",onClick:()=>{N(!1),q(""),C("")},className:"px-6 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-300 hover:bg-white/10 transition",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Payout History"}),p&&p.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/10",children:[t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Date"}),t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Method"}),t.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Status"}),t.jsx("th",{className:"text-right py-3 px-4 text-gray-400 font-semibold",children:"Amount"})]})}),t.jsx("tbody",{children:p.map(e=>t.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[t.jsx("td",{className:"py-3 px-4 text-gray-300",children:new Date(e.requested_at).toLocaleDateString()}),t.jsx("td",{className:"py-3 px-4 text-gray-300 capitalize",children:e.method.replace("_"," ")}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("paid"===e.status?"bg-green-500/20 text-green-400":"approved"===e.status?"bg-blue-500/20 text-blue-400":"pending"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:e.status})}),t.jsxs("td",{className:"py-3 px-4 text-right text-white font-semibold",children:["$",e.amount.toFixed(2)]})]},e.id))})]})}):t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx(c,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No payout history yet"})]})]})]})})})}export{m as default};
