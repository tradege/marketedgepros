import{h as e,j as t}from"./index-BkGnuqT2.js";import{b as s}from"./react-vendor-DvHQdeg3.js";import a from"./TraderLayout-B1F-F_kW.js";import{D as l}from"./download-CGTLfFpW.js";import{S as r}from"./search-ofaqpikq.js";import{F as i}from"./funnel-D_T_0w4v.js";import{C as n}from"./calendar-dtDqGftW.js";import{T as x}from"./trending-up-D0GvJBwX.js";import{T as c}from"./trending-down-DJO-OdMp.js";import"./utils-BQl1bh9w.js";import"./layout-dashboard-L_Z17QYO.js";import"./wallet-BSaWvwg3.js";import"./dollar-sign-Ckt1Hz7_.js";import"./file-text-kM2pm0t3.js";import"./user-C7OmfB1H.js";import"./log-out-Ddg7KbVc.js";import"./menu-C-UU_KdK.js";function o(){const[o,d]=s.useState([]),[m,p]=s.useState(!0),[h,j]=s.useState(""),[g,u]=s.useState("all"),[y,f]=s.useState("all");s.useEffect(()=>{N()},[]);const N=()=>{return t=null,s=null,a=function*(){try{p(!0);const t=yield e.get("/trader/trades");d(t.data.trades||[])}catch(t){d([])}finally{p(!1)}},new Promise((e,l)=>{var r=e=>{try{n(a.next(e))}catch(t){l(t)}},i=e=>{try{n(a.throw(e))}catch(t){l(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,i);n((a=a.apply(t,s)).next())});var t,s,a},b=o.filter(e=>{const t=e.symbol.toLowerCase().includes(h.toLowerCase()),s="all"===g||e.type===g;let a=!0;if("all"!==y){const t=new Date(e.closeTime),s=new Date;if("today"===y)a=t.toDateString()===s.toDateString();else if("this_week"===y){a=t>=new Date(s.getTime()-6048e5)}else"this_month"===y&&(a=t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear())}return t&&s&&a}),v={totalTrades:b.length,winningTrades:b.filter(e=>e.profit>0).length,losingTrades:b.filter(e=>e.profit<0).length,totalProfit:b.reduce((e,t)=>e+t.profit,0),totalPips:b.reduce((e,t)=>e+t.pips,0)};return m?t.jsx(a,{children:t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),t.jsx("p",{className:"text-gray-300 mt-4",children:"Loading trading history..."})]})})}):t.jsx(a,{children:t.jsxs("div",{className:"min-h-screen bg-slate-900",children:[t.jsx("div",{className:"bg-slate-800/50 border-b border-white/10",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Trading History"}),t.jsx("p",{className:"text-gray-300 mt-2",children:"View all your past trades"})]}),t.jsxs("button",{onClick:()=>{const e=[["Symbol","Type","Lots","Open Price","Close Price","Open Time","Close Time","Pips","Profit","Commission","Swap"],...b.map(e=>[e.symbol,e.type,e.lots,e.openPrice,e.closePrice,new Date(e.openTime).toLocaleString(),new Date(e.closeTime).toLocaleString(),e.pips,e.profit,e.commission,e.swap])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`trading-history-${(new Date).toISOString().split("T")[0]}.csv`,a.click()},className:"btn btn-primary flex items-center gap-2",children:[t.jsx(l,{className:"w-5 h-5"}),"Export"]})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[t.jsxs("div",{className:"card text-center",children:[t.jsx("p",{className:"text-sm text-gray-300 mb-1",children:"Total Trades"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:v.totalTrades})]}),t.jsxs("div",{className:"card text-center",children:[t.jsx("p",{className:"text-sm text-gray-300 mb-1",children:"Winning"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.winningTrades})]}),t.jsxs("div",{className:"card text-center",children:[t.jsx("p",{className:"text-sm text-gray-300 mb-1",children:"Losing"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.losingTrades})]}),t.jsxs("div",{className:"card text-center",children:[t.jsx("p",{className:"text-sm text-gray-300 mb-1",children:"Total Profit"}),t.jsxs("p",{className:"text-2xl font-bold "+(v.totalProfit>=0?"text-green-600":"text-red-600"),children:[v.totalProfit>=0?"+":"","$",v.totalProfit.toFixed(2)]})]}),t.jsxs("div",{className:"card text-center",children:[t.jsx("p",{className:"text-sm text-gray-300 mb-1",children:"Total Pips"}),t.jsxs("p",{className:"text-2xl font-bold "+(v.totalPips>=0?"text-green-600":"text-red-600"),children:[v.totalPips>=0?"+":"",v.totalPips]})]})]}),t.jsx("div",{className:"bg-slate-800/50 rounded-lg shadow-sm p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by symbol...",value:h,onChange:e=>j(e.target.value),className:"input pl-10 w-full"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(i,{className:"w-5 h-5 text-gray-400"}),t.jsxs("select",{value:g,onChange:e=>u(e.target.value),className:"input flex-1",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"buy",children:"Buy"}),t.jsx("option",{value:"sell",children:"Sell"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(n,{className:"w-5 h-5 text-gray-400"}),t.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:"input flex-1",children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"this_week",children:"This Week"}),t.jsx("option",{value:"this_month",children:"This Month"})]})]})]})}),t.jsxs("div",{className:"bg-slate-800/50 rounded-lg shadow-sm overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-900 border-b border-white/10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Symbol"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Type"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Lots"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Open Price"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Close Price"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Open Time"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Close Time"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Pips"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Profit"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map(e=>t.jsxs("tr",{className:"hover:bg-slate-900",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-white",children:e.symbol}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:["buy"===e.type?t.jsx(x,{className:"w-4 h-4 text-green-600"}):t.jsx(c,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("buy"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type.toUpperCase()})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-white",children:e.lots}),t.jsx("td",{className:"px-4 py-3 text-sm text-white",children:e.openPrice}),t.jsx("td",{className:"px-4 py-3 text-sm text-white",children:e.closePrice}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(e.openTime).toLocaleString()}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:new Date(e.closeTime).toLocaleString()}),t.jsxs("td",{className:"px-4 py-3 text-sm font-medium "+(e.pips>=0?"text-green-600":"text-red-600"),children:[e.pips>=0?"+":"",e.pips]}),t.jsxs("td",{className:"px-4 py-3 text-sm font-bold "+(e.profit>=0?"text-green-600":"text-red-600"),children:[e.profit>=0?"+":"","$",e.profit.toFixed(2)]})]},e.id))})]})}),0===b.length&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-300",children:"No trades found"})})]})]})]})})}export{o as default};
