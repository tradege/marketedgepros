var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,n=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&o(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&o(e,r,t[r]);return e},d=(e,a)=>t(e,r(a));import{j as i,C as c,a as m,d as h}from"./index-BDL4ZnkK.js";import{b as x,u as b}from"./react-vendor-DvHQdeg3.js";import{T as u}from"./trending-up-Cb1zXv3n.js";import{T as g}from"./trending-down-Bq1nrQV5.js";import{M as p}from"./minus-BDblKZ_F.js";import{S as f}from"./search-D3taNnrN.js";import{C as v,a as j,b as w}from"./chevrons-right-IwiGmIfK.js";import{C as y}from"./chevron-right-CSSLsKQJ.js";import{a as N}from"./utils-BQl1bh9w.js";import{U as k}from"./users-CzB9XHki.js";import{D as C}from"./dollar-sign-ClwTgUJC.js";import{F as S}from"./file-text-CoK-hxt2.js";import{U as $}from"./user-check-BsqRhZb6.js";import{A}from"./activity-DpFBUTEi.js";function L({title:e,value:t,subtitle:r,icon:a,trend:s,trendValue:l,color:o="cyan",onClick:n,loading:d=!1}){const c={cyan:{gradient:"from-cyan-500 to-teal-500",bg:"bg-cyan-500/10",border:"border-cyan-500/30",text:"text-cyan-400",shadow:"hover:shadow-cyan-500/20"},purple:{gradient:"from-purple-500 to-pink-500",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400",shadow:"hover:shadow-purple-500/20"},green:{gradient:"from-green-500 to-emerald-500",bg:"bg-green-500/10",border:"border-green-500/30",text:"text-green-400",shadow:"hover:shadow-green-500/20"},amber:{gradient:"from-amber-500 to-orange-500",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",shadow:"hover:shadow-amber-500/20"},blue:{gradient:"from-blue-500 to-indigo-500",bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",shadow:"hover:shadow-blue-500/20"},red:{gradient:"from-red-500 to-rose-500",bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",shadow:"hover:shadow-red-500/20"}},m=c[o]||c.cyan;return d?i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6 animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2 mb-4"}),i.jsx("div",{className:"h-8 bg-slate-700 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/3"})]}):i.jsxs("div",{onClick:n,className:`\n        group relative bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6\n        transition-all duration-300 hover:bg-slate-800/70 hover:border-white/20\n        ${n?"cursor-pointer hover:scale-105":""}\n        ${m.shadow} hover:shadow-xl\n      `,children:[i.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl ${m.bg} border ${m.border} mb-4`,children:a&&i.jsx(a,{className:`w-6 h-6 ${m.text}`})}),i.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:e}),i.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[i.jsx("p",{className:`text-3xl font-bold bg-gradient-to-r ${m.gradient} bg-clip-text text-transparent`,children:t}),l&&i.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold "+("up"===s?"text-green-400":"down"===s?"text-red-400":"text-gray-400"),children:["up"===s?i.jsx(u,{className:"w-4 h-4"}):"down"===s?i.jsx(g,{className:"w-4 h-4"}):i.jsx(p,{className:"w-4 h-4"}),i.jsx("span",{children:l})]})]}),r&&i.jsx("p",{className:"text-sm text-gray-400",children:r}),i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${m.gradient} opacity-0 group-hover:opacity-5 rounded-2xl transition-opacity duration-300`})]})}function O({columns:e,data:t,pageSize:r=10,searchable:a=!1,onRowClick:s,loading:l=!1}){const[o,n]=x.useState(1),[d,c]=x.useState(""),m=a&&d?t.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(d.toLowerCase()))):t,h=Math.ceil(m.length/r),b=(o-1)*r,u=b+r,g=m.slice(b,u),p=e=>{n(Math.max(1,Math.min(e,h)))};return l?i.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl overflow-hidden",children:i.jsx("div",{className:"p-6 space-y-4",children:[...Array(5)].map((e,t)=>i.jsx("div",{className:"h-12 bg-slate-700/50 rounded animate-pulse"},t))})}):i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl overflow-hidden",children:[a&&i.jsx("div",{className:"p-4 border-b border-white/10",children:i.jsxs("div",{className:"relative",children:[i.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search...",value:d,onChange:e=>{c(e.target.value),n(1)},className:"w-full pl-10 pr-4 py-2 bg-slate-900/50 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsx("tr",{className:"border-b border-white/10 bg-slate-900/30",children:e.map((e,t)=>i.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:e.headerName||e.field},t))})}),i.jsx("tbody",{className:"divide-y divide-white/5",children:0===g.length?i.jsx("tr",{children:i.jsx("td",{colSpan:e.length,className:"px-6 py-12 text-center text-gray-400",children:"No data available"})}):g.map((t,r)=>i.jsx("tr",{onClick:()=>s&&s(t),className:`\n                    transition-colors duration-200\n                    ${s?"cursor-pointer hover:bg-slate-700/30":""}\n                  `,children:e.map((e,r)=>i.jsx("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.render?e.render(t[e.field],t):t[e.field]},r))},r))})]})}),h>1&&i.jsxs("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",b+1," to ",Math.min(u,m.length)," of"," ",m.length," results"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>p(1),disabled:1===o,className:"p-2 rounded-lg border border-white/10 text-gray-400 hover:bg-slate-700/30 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:i.jsx(v,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>p(o-1),disabled:1===o,className:"p-2 rounded-lg border border-white/10 text-gray-400 hover:bg-slate-700/30 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:i.jsx(j,{className:"w-4 h-4"})}),i.jsx("div",{className:"flex items-center gap-1",children:[...Array(h)].map((e,t)=>{const r=t+1;return 1===r||r===h||r>=o-1&&r<=o+1?i.jsx("button",{onClick:()=>p(r),className:`\n                        min-w-[40px] px-3 py-2 rounded-lg text-sm font-medium transition-all\n                        ${o===r?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white":"border border-white/10 text-gray-400 hover:bg-slate-700/30 hover:text-white"}\n                      `,children:r},r):r===o-2||r===o+2?i.jsx("span",{className:"px-2 text-gray-400",children:"..."},r):null})}),i.jsx("button",{onClick:()=>p(o+1),disabled:o===h,className:"p-2 rounded-lg border border-white/10 text-gray-400 hover:bg-slate-700/30 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:i.jsx(y,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>p(h),disabled:o===h,className:"p-2 rounded-lg border border-white/10 text-gray-400 hover:bg-slate-700/30 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:i.jsx(w,{className:"w-4 h-4"})})]})]})]})}function _(){const e=b(),[t,r]=x.useState(null),[a,s]=x.useState(!0),[l,o]=x.useState(null);x.useEffect(()=>{g()},[]);const g=()=>{return e=null,t=null,a=function*(){try{s(!0);const e=localStorage.getItem("access_token"),t=yield N.get("/api/v1/admin/dashboard/stats",{headers:{Authorization:`Bearer ${e}`}});r(t.data),o(null)}catch(e){console.error("Failed to load dashboard:",e),o("Failed to load dashboard data")}finally{s(!1)}},new Promise((r,s)=>{var l=e=>{try{n(a.next(e))}catch(t){s(t)}},o=e=>{try{n(a.throw(e))}catch(t){s(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,o);n((a=a.apply(e,t)).next())});var e,t,a};if(a)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-cyan-500 border-t-transparent mb-4"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"Loading dashboard..."})]})});if(l)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx(c,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error Loading Dashboard"}),i.jsx("p",{className:"text-gray-400 mb-6",children:l}),i.jsx("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-cyan-500/50 transition-all duration-300",children:"Try Again"})]})});if(!t)return null;const p=[{title:"Total Users",value:t.users.total.toLocaleString(),subtitle:`${t.users.active} active users`,icon:k,color:"cyan",trend:"up",trendValue:"+12.5%",onClick:()=>e("/admin/users")},{title:"Total Revenue",value:`$${t.revenue.total.toLocaleString()}`,subtitle:`$${t.revenue.monthly.toLocaleString()} this month`,icon:C,color:"green",trend:"up",trendValue:"+18.2%",onClick:()=>e("/admin/payments")},{title:"Active Challenges",value:t.challenges.active.toLocaleString(),subtitle:`${t.challenges.completed} completed`,icon:u,color:"blue",trend:"up",trendValue:"+8.3%"},{title:"Pending KYC",value:t.users.pending_kyc.toLocaleString(),subtitle:"Requires review",icon:S,color:"amber",onClick:()=>e("/admin/kyc")}],f=[{title:"Completed",value:t.challenges.completed,total:t.challenges.total,color:"green",icon:m},{title:"Failed",value:t.challenges.failed,total:t.challenges.total,color:"red",icon:h},{title:"Funded",value:t.challenges.funded,total:t.challenges.total,color:"blue",icon:$}],v=[{field:"name",headerName:"Name",render:(e,t)=>{var r;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 flex items-center justify-center text-white font-semibold text-sm",children:(null==(r=null==e?void 0:e.charAt(0))?void 0:r.toUpperCase())||"?"}),i.jsx("span",{className:"font-medium text-white",children:e})]})}},{field:"email",headerName:"Email"},{field:"role",headerName:"Role",render:e=>i.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-cyan-500/10 border border-cyan-500/30 text-cyan-400",children:e})},{field:"status",headerName:"Status",render:e=>{const t={active:"bg-green-500/10 border-green-500/30 text-green-400",inactive:"bg-gray-500/10 border-gray-500/30 text-gray-400",pending:"bg-amber-500/10 border-amber-500/30 text-amber-400"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[e]||t.inactive}`,children:e})}},{field:"created_at",headerName:"Joined"}],j=[{field:"user_id",headerName:"User ID"},{field:"amount",headerName:"Amount",render:e=>i.jsx("span",{className:"font-semibold text-white",children:e})},{field:"type",headerName:"Type"},{field:"status",headerName:"Status",render:e=>{const t={completed:"bg-green-500/10 border-green-500/30 text-green-400",pending:"bg-amber-500/10 border-amber-500/30 text-amber-400",failed:"bg-red-500/10 border-red-500/30 text-red-400"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[e]||t.pending}`,children:e})}},{field:"created_at",headerName:"Date"}],w=t.recent_users.map(e=>d(n({},e),{created_at:new Date(e.created_at).toLocaleDateString()})),y=t.recent_payments.map(e=>d(n({},e),{amount:`$${e.amount.toFixed(2)}`,created_at:new Date(e.created_at).toLocaleDateString()}));return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 p-8 space-y-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Admin Dashboard"}),i.jsx("p",{className:"text-gray-400 text-lg",children:"Overview of platform metrics and activity"})]}),i.jsxs("button",{onClick:()=>e("/admin/analytics"),className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-cyan-500/50 transition-all duration-300 flex items-center gap-2",children:[i.jsx(A,{className:"w-5 h-5"}),"View Analytics"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((e,t)=>i.jsx(L,n({},e),t))}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.map((e,t)=>{const r=e.value/e.total*100||0,a=e.icon;return i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:bg-slate-800/70 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:e.title}),i.jsx(a,{className:`w-6 h-6 text-${e.color}-400`})]}),i.jsx("p",{className:`text-4xl font-bold text-${e.color}-400 mb-4`,children:e.value.toLocaleString()}),i.jsx("div",{className:"relative w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`absolute inset-y-0 left-0 bg-gradient-to-r from-${e.color}-500 to-${e.color}-400 rounded-full transition-all duration-500`,style:{width:`${r}%`}})}),i.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:[r.toFixed(1),"% of total challenges"]})]},t)})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recent Users"}),i.jsx("button",{onClick:()=>e("/admin/users"),className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"View All →"})]}),i.jsx(O,{columns:v,data:w,pageSize:5,searchable:!0,onRowClick:t=>e(`/admin/users/${t.id}`)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Recent Payments"}),i.jsx("button",{onClick:()=>e("/admin/payments"),className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"View All →"})]}),i.jsx(O,{columns:j,data:y,pageSize:5,searchable:!0})]})]})]})}export{_ as default};
