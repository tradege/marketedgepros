var e=(e,t,s)=>new Promise((a,l)=>{var r=e=>{try{n(s.next(e))}catch(t){l(t)}},i=e=>{try{n(s.throw(e))}catch(t){l(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((s=s.apply(e,t)).next())});import{j as t,u as s,a,X as l}from"./index-BDL4ZnkK.js";import{u as r,b as i,f as n,L as o}from"./react-vendor-DvHQdeg3.js";import{u as d}from"./notificationStore-D--P3A3T.js";import{f as c}from"./dateUtils-CNmF8-oe.js";import{L as m}from"./loader-CoC71FmS.js";import{B as h}from"./bell-C80n2iRt.js";import{T as x}from"./trash-2-DzZiw1kk.js";import{L as u}from"./layout-dashboard-Ch13tZ1z.js";import{U as p}from"./users-CzB9XHki.js";import{C as b}from"./chart-column-DdRnq9d0.js";import{C as f}from"./credit-card-BGyB6Sjv.js";import{D as g}from"./dollar-sign-ClwTgUJC.js";import{S as j}from"./settings-CObPTUFx.js";import{F as v}from"./file-text-CoK-hxt2.js";import{S as w}from"./shield-C8MrRhJd.js";import{C as N}from"./chevron-right-CSSLsKQJ.js";import{L as y,M as k}from"./menu-B6JP2uFa.js";import{S as C}from"./search-D3taNnrN.js";import"./utils-BQl1bh9w.js";function S({onClose:s}){const a=r(),{notifications:l,loading:n,fetchNotifications:o,markAsRead:u,markAllAsRead:p,deleteNotification:b}=d();i.useEffect(()=>{o(1,{per_page:10})},[o]);return n?t.jsx("div",{className:"flex justify-center p-8",children:t.jsx(m,{className:"w-8 h-8 text-blue-500 animate-spin"})}):t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{className:"w-5 h-5 text-white"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"})]}),l.length>0&&t.jsx("button",{onClick:()=>e(null,null,function*(){yield p()}),className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"Mark all read"})]}),0===l.length?t.jsx("div",{className:"p-8 text-center",children:t.jsx("p",{className:"text-gray-400",children:"No notifications"})}):t.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.map(l=>{return t.jsxs("div",{onClick:()=>(t=>e(null,null,function*(){t.is_read||(yield u(t.id)),"withdrawal"===t.type?a("/trader/withdrawals"):"commission"===t.type?a("/agent/commissions"):"kyc"===t.type&&a("/kyc"),s()}))(l),className:"flex items-start gap-3 p-4 border-b border-white/5 cursor-pointer transition-colors "+(l.is_read?"hover:bg-white/5":"bg-white/10 hover:bg-white/15"),children:[t.jsx("div",{className:"text-2xl flex-shrink-0",children:(i=l.type,{withdrawal:"ðŸ’°",commission:"ðŸ’µ",kyc:"ðŸ†”",system:"ðŸ“¢",payment:"ðŸ’³",challenge:"ðŸŽ¯"}[i]||"ðŸ“¬")}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("p",{className:"text-sm "+(l.is_read?"text-gray-300":"text-white font-semibold"),children:l.title}),!l.is_read&&t.jsx("div",{className:`w-2 h-2 rounded-full ${r=l.priority,{low:"bg-gray-400",normal:"bg-blue-500",high:"bg-yellow-500",urgent:"bg-red-500"}[r]||"bg-blue-500"}`})]}),t.jsx("p",{className:"text-sm text-gray-400 mb-1 line-clamp-2",children:l.message}),t.jsx("p",{className:"text-xs text-gray-500",children:c(new Date(l.created_at),{addSuffix:!0})})]}),t.jsx("button",{onClick:t=>((t,s)=>e(null,null,function*(){t.stopPropagation(),yield b(s)}))(t,l.id),className:"flex-shrink-0 p-1 text-gray-400 hover:text-red-400 transition-colors",children:t.jsx(x,{className:"w-4 h-4"})})]},l.id);var r,i})}),l.length>0&&t.jsx("div",{className:"p-2 border-t border-white/10",children:t.jsx("button",{onClick:()=>{a("/notifications"),s()},className:"w-full py-2 text-sm text-blue-400 hover:text-blue-300 hover:bg-white/5 rounded transition-colors",children:"View All Notifications"})})]})}function _({children:d}){var c,m,x;const[_,z]=i.useState(!1),[A,P]=i.useState(!1),[L,E]=i.useState(!1),D=n(),M=r(),{user:B,logout:R}=s(),U=[{title:"Dashboard",path:"/admin/dashboard",icon:u},{title:"Users",path:"/admin/users",icon:p},{title:"Programs",path:"/admin/programs",icon:b},{title:"Payments",path:"/admin/payments",icon:f},{title:"Withdrawals",path:"/admin/withdrawals",icon:g},{title:"KYC Approval",path:"/admin/kyc",icon:a},{title:"Payment Approvals",path:"/admin/payment-approvals",icon:a},{title:"Analytics",path:"/admin/analytics",icon:b},{title:"Settings",path:"/admin/settings",icon:j}],$="supermaster"===(null==B?void 0:B.role)?[...U.slice(0,8),{title:"Blog",path:"/admin/blog",icon:v},U[8]]:U,F=e=>D.pathname===e;return i.useEffect(()=>{const e=e=>{A&&!e.target.closest(".search-dropdown")&&P(!1),L&&!e.target.closest(".notifications-dropdown")&&E(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[A,L]),t.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white overflow-hidden",children:[t.jsxs("aside",{className:`\n          fixed lg:static inset-y-0 left-0 z-40\n          w-72 bg-slate-800/30 backdrop-blur-xl border-r border-white/10\n          transform transition-transform duration-300 ease-in-out\n          ${_?"translate-x-0":"-translate-x-full lg:translate-x-0"}\n          flex flex-col\n        `,children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center shadow-lg shadow-cyan-500/30",children:t.jsx(w,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent",children:"Admin Panel"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Management Console"})]})]}),t.jsx("button",{onClick:()=>z(!1),className:"lg:hidden p-2 rounded-lg hover:bg-slate-700/50 transition-colors",children:t.jsx(l,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 border-b border-white/10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center text-white font-semibold",children:[null==(c=null==B?void 0:B.first_name)?void 0:c[0],null==(m=null==B?void 0:B.last_name)?void 0:m[0]]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:"text-sm font-semibold text-white truncate",children:[null==B?void 0:B.first_name," ",null==B?void 0:B.last_name]}),t.jsx("p",{className:"text-xs text-gray-400 truncate",children:null==B?void 0:B.email})]})]}),t.jsx("div",{className:"flex items-center gap-1.5",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium bg-gradient-to-r from-cyan-500/10 to-teal-500/10 text-cyan-400 rounded-lg border border-cyan-500/30",children:[t.jsx(w,{className:"w-3 h-3"}),"Administrator"]})})]}),t.jsx("nav",{className:"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:t.jsx("ul",{className:"space-y-1.5",children:$.map(e=>{const s=e.icon,a=F(e.path);return t.jsx("li",{children:t.jsxs(o,{to:e.path,onClick:()=>z(!1),className:`\n                      group flex items-center gap-3 px-4 py-3 rounded-xl\n                      transition-all duration-200 relative overflow-hidden\n                      ${a?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg shadow-cyan-500/30":"text-gray-300 hover:bg-slate-700/30 hover:text-white"}\n                    `,children:[!a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx(s,{className:"w-5 h-5 relative z-10 "+(a?"animate-pulse":"")}),t.jsx("span",{className:"font-medium relative z-10",children:e.title}),a&&t.jsx(N,{className:"w-4 h-4 ml-auto relative z-10 animate-pulse"})]})},e.path)})})}),t.jsx("div",{className:"p-4 border-t border-white/10",children:t.jsxs("button",{onClick:()=>e(null,null,function*(){yield R(),M("/login")}),className:"group flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-red-500/10 hover:text-red-400 transition-all duration-200 w-full border border-transparent hover:border-red-500/30",children:[t.jsx(y,{className:"w-5 h-5 group-hover:animate-pulse"}),t.jsx("span",{className:"font-medium",children:"Logout"})]})})]}),_&&t.jsx("div",{onClick:()=>z(!1),className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30"}),t.jsxs("main",{className:"flex-1 overflow-y-auto relative",children:[t.jsx("div",{className:"sticky top-0 z-20 bg-slate-800/50 backdrop-blur-xl border-b border-white/10 px-8 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>z(!0),className:"lg:hidden p-2 rounded-xl bg-slate-700/30 hover:bg-slate-700/50 transition-all duration-200",children:t.jsx(k,{className:"w-5 h-5"})}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:(null==(x=$.find(e=>F(e.path)))?void 0:x.title)||"Dashboard"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative search-dropdown",children:[t.jsx("button",{onClick:()=>{P(!A),E(!1)},className:"p-2 rounded-xl bg-slate-700/30 hover:bg-slate-700/50 text-gray-300 hover:text-white transition-all duration-200",children:t.jsx(C,{className:"w-5 h-5"})}),A&&t.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-slate-800/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl p-4 z-30",children:[t.jsx("input",{type:"text",placeholder:"Search users, transactions, data...",autoFocus:!0,className:"w-full px-4 py-3 bg-slate-900/50 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),t.jsx("p",{className:"text-sm text-gray-400 mt-3",children:"Press Enter to search"})]})]}),t.jsxs("div",{className:"relative notifications-dropdown",children:[t.jsxs("button",{onClick:()=>{E(!L),P(!1)},className:"relative p-2 rounded-xl bg-slate-700/30 hover:bg-slate-700/50 text-gray-300 hover:text-white transition-all duration-200",children:[t.jsx(h,{className:"w-5 h-5"}),t.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),L&&t.jsx("div",{className:"absolute top-full right-0 mt-2 w-96 bg-slate-800/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl overflow-hidden z-30",children:t.jsx(S,{onClose:()=>E(!1)})})]})]})]})}),t.jsx("div",{className:"relative z-10",children:d})]})]})}export{_ as default};
