var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;import{j as l,h as d}from"./index-xawegGrD.js";import{b as n}from"./react-vendor-DvHQdeg3.js";import{T as o}from"./trending-up-zkqMAFST.js";import{T as i}from"./trending-down-QQgT08nr.js";import{M as c}from"./minus-DdoO-OJl.js";import x from"./UserLayout-2gE2oFGg.js";import{C as g}from"./clock-BMPRwSQ2.js";import{D as m}from"./dollar-sign-CBC9H-L-.js";import{T as b}from"./trophy-DbV-Yua5.js";import"./utils-BQl1bh9w.js";function u({title:e,value:t,subtitle:r,icon:a,trend:s,trendValue:d,color:n="cyan",onClick:x,loading:g=!1}){const m={cyan:{gradient:"from-cyan-500 to-teal-500",bg:"bg-cyan-500/10",border:"border-cyan-500/30",text:"text-cyan-400",shadow:"hover:shadow-cyan-500/20"},purple:{gradient:"from-purple-500 to-pink-500",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400",shadow:"hover:shadow-purple-500/20"},green:{gradient:"from-green-500 to-emerald-500",bg:"bg-green-500/10",border:"border-green-500/30",text:"text-green-400",shadow:"hover:shadow-green-500/20"},amber:{gradient:"from-amber-500 to-orange-500",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400",shadow:"hover:shadow-amber-500/20"},blue:{gradient:"from-blue-500 to-indigo-500",bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",shadow:"hover:shadow-blue-500/20"},red:{gradient:"from-red-500 to-rose-500",bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",shadow:"hover:shadow-red-500/20"}},b=m[n]||m.cyan;return g?l.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2 mb-4"}),l.jsx("div",{className:"h-8 bg-slate-700 rounded w-3/4 mb-2"}),l.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/3"})]}):l.jsxs("div",{onClick:x,className:`\n        group relative bg-slate-800/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6\n        transition-all duration-300 hover:bg-slate-800/70 hover:border-white/20\n        ${x?"cursor-pointer hover:scale-105":""}\n        ${b.shadow} hover:shadow-xl\n      `,children:[l.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl ${b.bg} border ${b.border} mb-4`,children:a&&l.jsx(a,{className:`w-6 h-6 ${b.text}`})}),l.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:e}),l.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[l.jsx("p",{className:`text-3xl font-bold bg-gradient-to-r ${b.gradient} bg-clip-text text-transparent`,children:t}),d&&l.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold "+("up"===s?"text-green-400":"down"===s?"text-red-400":"text-gray-400"),children:["up"===s?l.jsx(o,{className:"w-4 h-4"}):"down"===s?l.jsx(i,{className:"w-4 h-4"}):l.jsx(c,{className:"w-4 h-4"}),l.jsx("span",{children:d})]})]}),r&&l.jsx("p",{className:"text-sm text-gray-400",children:r}),l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${b.gradient} opacity-0 group-hover:opacity-5 rounded-2xl transition-opacity duration-300`})]})}function h(){const[e,i]=n.useState(!0),[c,h]=n.useState(null),[p,f]=n.useState(null);n.useEffect(()=>{j()},[]);const j=()=>{return e=null,t=null,r=function*(){var e,t;try{i(!0),h(null);const e=yield d.get("/users/dashboard");f(e.data)}catch(r){h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.error)||"Failed to load dashboard data")}finally{i(!1)}},new Promise((a,s)=>{var l=e=>{try{n(r.next(e))}catch(t){s(t)}},d=e=>{try{n(r.throw(e))}catch(t){s(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,d);n((r=r.apply(e,t)).next())});var e,t,r};if(e)return l.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(c)return l.jsx("div",{className:"mb-4",children:l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:c})})});if(!p)return null;const{user:y,statistics:v,recent_challenges:w}=p,N=[{title:"Active Challenges",value:v.active_challenges.toString(),subtitle:"In progress",icon:g,color:"primary"},{title:"Total Profit",value:`$${v.total_profit.toLocaleString()}`,subtitle:`${v.funded_challenges} funded account${1!==v.funded_challenges?"s":""}`,icon:m,color:"success",trend:v.total_profit>0?"up":void 0,trendValue:v.total_profit>0?`+$${v.total_profit.toLocaleString()}`:void 0},{title:"Success Rate",value:`${v.success_rate}%`,subtitle:`${v.passed_challenges} passed / ${v.failed_challenges} failed`,icon:o,color:"info"},{title:"Funded Accounts",value:v.funded_challenges.toString(),subtitle:v.funded_challenges>0?"Congratulations!":"Keep trading!",icon:b,color:"warning"}],k=e=>{if(!e.initial_balance||!e.current_balance)return 0;const t=e.profit/(.08*e.initial_balance)*100;return Math.min(Math.max(t,0),100)},$=e=>{const t=null==e?void 0:e.toLowerCase();return"active"===t?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"passed"===t?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"failed"===t?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"funded"===t?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"pending"===t?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"};return l.jsx(x,{children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome back, ",y.first_name,"! ðŸ‘‹"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Here's your trading overview"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:N.map((e,d)=>l.jsx(u,((e,l)=>{for(var d in l||(l={}))r.call(l,d)&&s(e,d,l[d]);if(t)for(var d of t(l))a.call(l,d)&&s(e,d,l[d]);return e})({},e),d))}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Challenges"}),0===w.length?l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:l.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8",children:"No challenges yet. Purchase a program to start your trading journey!"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.map(e=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.program_name}),l.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${$(e.status)}`,children:e.status.toUpperCase()})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progress"}),l.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[Math.round(k(e)),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 h-2 rounded-full transition-all duration-300",style:{width:`${k(e)}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Balance"}),l.jsxs("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:["$",e.current_balance.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Profit/Loss"}),l.jsxs("p",{className:"text-lg font-semibold "+(e.profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",e.profit.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Phase"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.phase||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Started"}),l.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]})]})]},e.id))})]})})}export{h as default};
