var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&d(e,a,t[a]);if(s)for(var a of s(t))l.call(t,a)&&d(e,a,t[a]);return e},i=(e,s)=>t(e,a(s));import{j as x,a as c}from"./index-DpaWMXzT.js";import{b as p}from"./react-vendor-DvHQdeg3.js";import{a as o}from"./utils-BQl1bh9w.js";import{D as g}from"./dollar-sign-BePXE02E.js";import{C as m}from"./clock-tbTDHlEb.js";import{T as u}from"./trending-up-C79cndjU.js";function h(){const[e,t]=p.useState([]),[a,s]=p.useState(!0),[r,l]=p.useState(null),[d,h]=p.useState({page:1,per_page:10,total:0,pages:0}),[y,j]=p.useState({status:"",type:""});p.useEffect(()=>{b()},[d.page,y]);const b=()=>{return e=null,a=null,r=function*(){try{s(!0);const e=localStorage.getItem("access_token"),a=new URLSearchParams({page:d.page.toString(),per_page:d.per_page.toString()});y.status&&a.append("status",y.status);const r=yield o.get(`/api/v1/admin/payments?${a.toString()}`,{headers:{Authorization:`Bearer ${e}`}});t(r.data.payments),h(e=>i(n({},e),{total:r.data.pagination.total,pages:r.data.pagination.pages})),l(null)}catch(e){l("Failed to load payments")}finally{s(!1)}},new Promise((t,s)=>{var l=e=>{try{n(r.next(e))}catch(t){s(t)}},d=e=>{try{n(r.throw(e))}catch(t){s(t)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,d);n((r=r.apply(e,a)).next())});var e,a,r},f=e=>{h(t=>i(n({},t),{page:e}))},w={totalRevenue:e.reduce((e,t)=>"completed"===t.status?e+t.amount:e,0),pendingPayouts:e.reduce((e,t)=>"pending"===t.status&&"withdrawal"===t.payment_type?e+t.amount:e,0),completedPayouts:e.reduce((e,t)=>"completed"===t.status&&"withdrawal"===t.payment_type?e+t.amount:e,0),pendingCount:e.filter(e=>"pending"===e.status).length};return a&&0===e.length?x.jsx("div",{className:"flex items-center justify-center h-screen",children:x.jsx("div",{className:"text-xl",children:"Loading..."})}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-white dark:text-white",children:"Payments Management"}),x.jsx("p",{className:"mt-2 text-sm text-gray-300 dark:text-gray-400",children:"Track and manage all payments and payouts"})]}),r&&x.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:r}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Total Revenue"}),x.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:["$",w.totalRevenue.toLocaleString()]}),x.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"+12.5% this month"})]}),x.jsx(g,{className:"w-12 h-12 text-green-600 dark:text-green-400"})]})}),x.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending Payouts"}),x.jsxs("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:["$",w.pendingPayouts.toLocaleString()]}),x.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:[w.pendingCount," requests"]})]}),x.jsx(m,{className:"w-12 h-12 text-yellow-600 dark:text-yellow-400"})]})}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Completed Payouts"}),x.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:["$",w.completedPayouts.toLocaleString()]}),x.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"This month"})]}),x.jsx(c,{className:"w-12 h-12 text-blue-600 dark:text-blue-400"})]})}),x.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Average Payout"}),x.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["$",e.length>0?(w.totalRevenue/e.length).toFixed(0):0]}),x.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Per trader"})]}),x.jsx(u,{className:"w-12 h-12 text-purple-600 dark:text-purple-400"})]})})]}),x.jsx("div",{className:"bg-slate-800/50 dark:bg-gray-800 p-4 rounded-lg shadow",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),x.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",value:y.status,onChange:e=>j(i(n({},y),{status:e.target.value})),children:[x.jsx("option",{value:"",children:"All Status"}),x.jsx("option",{value:"completed",children:"Completed"}),x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"failed",children:"Failed"}),x.jsx("option",{value:"refunded",children:"Refunded"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),x.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",value:y.type,onChange:e=>j(i(n({},y),{type:e.target.value})),children:[x.jsx("option",{value:"",children:"All Types"}),x.jsx("option",{value:"challenge_purchase",children:"Purchase"}),x.jsx("option",{value:"withdrawal",children:"Payout"}),x.jsx("option",{value:"refund",children:"Refund"})]})]})]})}),x.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full",children:[x.jsx("thead",{className:"bg-slate-900 dark:bg-gray-700",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"User ID"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Method"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Date"})]})}),x.jsx("tbody",{className:"bg-slate-800/50 dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(e=>{return x.jsxs("tr",{className:"hover:bg-slate-900 dark:hover:bg-gray-700",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-white dark:text-white",children:e.transaction_id}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 dark:text-gray-400",children:["#",e.user_id]}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-white dark:text-white",children:["$",e.amount.toFixed(2)," ",e.currency]}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a=e.payment_type,{challenge_purchase:"bg-blue-100 text-blue-800",withdrawal:"bg-green-100 text-green-800",refund:"bg-red-100 text-red-800"}[a]||"bg-slate-700/50 text-gray-100"}`,children:e.payment_type?e.payment_type.replace("_"," "):"N/A"})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t=e.status,{completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",refunded:"bg-slate-700/50 text-gray-100"}[t]||"bg-slate-700/50 text-gray-100"}`,children:e.status})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 dark:text-gray-400",children:e.payment_method||"N/A"}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]},e.id);var t,a})})]})}),x.jsxs("div",{className:"bg-slate-900 dark:bg-gray-700 px-6 py-3 flex items-center justify-between",children:[x.jsxs("div",{className:"text-sm text-gray-200 dark:text-gray-300",children:["Showing ",(d.page-1)*d.per_page+1," to ",Math.min(d.page*d.per_page,d.total)," of ",d.total," payments"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>f(d.page-1),disabled:1===d.page,className:"px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),x.jsxs("span",{className:"px-3 py-1",children:["Page ",d.page," of ",d.pages]}),x.jsx("button",{onClick:()=>f(d.page+1),disabled:d.page>=d.pages,className:"px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}export{h as default};
