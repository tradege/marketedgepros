var e=(e,t,s)=>new Promise((a,r)=>{var l=e=>{try{c(s.next(e))}catch(t){r(t)}},d=e=>{try{c(s.throw(e))}catch(t){r(t)}},c=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,d);c((s=s.apply(e,t)).next())});import{c as t,j as s,a,d as r}from"./index-DqkTwD-s.js";import{b as l}from"./react-vendor-DvHQdeg3.js";import{a as d}from"./utils-BQl1bh9w.js";import{C as c}from"./clock-CSc8B_dZ.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=t("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),n="/api/v1";function x(){const[t,x]=l.useState([]),[o,p]=l.useState(!0),[m,h]=l.useState(null),[u,g]=l.useState([]);l.useEffect(()=>{y()},[]);const y=()=>e(null,null,function*(){try{p(!0);const e=localStorage.getItem("access_token"),t=yield d.get(`${n}/admin/kyc/pending`,{headers:{Authorization:`Bearer ${e}`}});x(t.data.pending_kyc);const s=yield d.get(`${n}/admin/users?per_page=1000`,{headers:{Authorization:`Bearer ${e}`}});g(s.data.users),h(null)}catch(e){h("Failed to load KYC data")}finally{p(!1)}}),j={pending:u.filter(e=>"pending"===e.kyc_status).length,approved:u.filter(e=>"approved"===e.kyc_status).length,rejected:u.filter(e=>"rejected"===e.kyc_status).length,total:u.filter(e=>"not_submitted"!==e.kyc_status).length},b=j.total>0?Math.round(j.approved/j.total*100):0;return o?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"text-xl",children:"Loading..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white dark:text-white",children:"KYC Approval"}),s.jsx("p",{className:"mt-2 text-sm text-gray-300 dark:text-gray-400",children:"Review and approve user identity verification"})]}),m&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending KYC"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:j.pending}),s.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Requires review"})]}),s.jsx(c,{className:"w-12 h-12 text-yellow-600 dark:text-yellow-400"})]})}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Approved"}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:j.approved}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Verified users"})]}),s.jsx(a,{className:"w-12 h-12 text-green-600 dark:text-green-400"})]})}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Rejected"}),s.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:j.rejected}),s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Failed verification"})]}),s.jsx(r,{className:"w-12 h-12 text-red-600 dark:text-red-400"})]})}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Verification Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[b,"%"]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Success rate"})]}),s.jsx(i,{className:"w-12 h-12 text-blue-600 dark:text-blue-400"})]})})]}),s.jsxs("div",{className:"bg-slate-800/50 dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-white/10 dark:border-gray-700",children:s.jsx("h2",{className:"text-lg font-semibold text-white dark:text-white",children:"Pending KYC Submissions"})}),0===t.length?s.jsxs("div",{className:"p-8 text-center text-gray-400 dark:text-gray-400",children:[s.jsx(i,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"No pending KYC submissions"}),s.jsx("p",{className:"text-sm mt-2",children:"All KYC requests have been processed"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-900 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Submitted Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Documents"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-slate-800/50 dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(t=>s.jsxs("tr",{className:"hover:bg-slate-900 dark:hover:bg-gray-700",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-white dark:text-white",children:[t.first_name," ",t.last_name]}),s.jsxs("div",{className:"text-sm text-gray-400 dark:text-gray-400",children:["ID: #",t.id]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 dark:text-gray-400",children:t.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 dark:text-gray-400",children:t.kyc_submitted_at?new Date(t.kyc_submitted_at).toLocaleDateString():"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex gap-2",children:[t.kyc_id_url&&s.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"ID"}),t.kyc_address_url&&s.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Address"}),t.kyc_selfie_url&&s.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"Selfie"}),t.kyc_bank_url&&s.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Bank"}),!t.kyc_id_url&&!t.kyc_address_url&&!t.kyc_selfie_url&&!t.kyc_bank_url&&s.jsx("span",{className:"px-2 py-1 text-xs bg-slate-700/50 text-gray-100 rounded",children:"No documents"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{return s=t.id,e(null,null,function*(){try{const e=localStorage.getItem("access_token");yield d.post(`${n}/admin/kyc/${s}/approve`,{},{headers:{Authorization:`Bearer ${e}`}}),y(),alert("KYC approved successfully")}catch(e){alert("Failed to approve KYC")}});var s},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),s.jsx("button",{onClick:()=>{return s=t.id,e(null,null,function*(){try{const e=localStorage.getItem("access_token"),t=prompt("Please enter rejection reason:");if(!t)return;yield d.post(`${n}/admin/kyc/${s}/reject`,{reason:t},{headers:{Authorization:`Bearer ${e}`}}),y(),alert("KYC rejected successfully")}catch(e){alert("Failed to reject KYC")}});var s},className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"}),s.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"View"})]})})]},t.id))})]})})]})]})}export{x as default};
