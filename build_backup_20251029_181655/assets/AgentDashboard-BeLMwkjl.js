import{h as e,j as s,a as t,d as a}from"./index-mRcxeGv4.js";import{b as l,L as i}from"./react-vendor-DvHQdeg3.js";import r from"./AgentLayout-C6_965Ww.js";import{U as d}from"./users-it9-WWnf.js";import{D as n}from"./dollar-sign-Bw6c1K5x.js";import{T as c}from"./trending-up-CoS_aTkv.js";import{A as m}from"./award-BngRNTkv.js";import{C as x}from"./clock-DzF3KuUt.js";import{A as o}from"./arrow-up-right-rzA_dcau.js";import"./utils-BQl1bh9w.js";import"./layout-dashboard-_tnkVKn_.js";import"./chart-column-BCDfgkpC.js";import"./user-Cvt20VzB.js";import"./menu-RA6otpTY.js";function h(){const[h,g]=l.useState({totalTraders:0,activeTraders:0,totalCommissions:0,pendingCommissions:0,activeChallenges:0,passedChallenges:0,failedChallenges:0,fundedAccounts:0}),[j,p]=l.useState([]),[u,f]=l.useState([]),[N,v]=l.useState(!0);l.useEffect(()=>{w()},[]);const w=()=>{return s=null,t=null,a=function*(){try{v(!0);const[s,t]=yield Promise.all([e.get("/reports/agent/dashboard"),e.get("/commissions")]),a=s.data,l=t.data;g({totalTraders:a.total_referrals||0,activeTraders:a.active_traders||0,totalCommissions:a.total_earned||0,pendingCommissions:a.pending_balance||0,activeChallenges:a.active_challenges||0,passedChallenges:a.passed_challenges||0,failedChallenges:a.failed_challenges||0,fundedAccounts:a.funded_accounts||0}),a.recent_referrals&&p(a.recent_referrals.map(e=>({id:e.id,name:`${e.first_name} ${e.last_name}`,email:e.email,status:e.status||"active",enrolled:new Date(e.created_at).toLocaleDateString(),program:e.program_name||"N/A"}))),l.commissions&&f(l.commissions.slice(0,5).map(e=>({id:e.id,trader:e.trader_name||"N/A",amount:e.amount,type:e.type||"enrollment",status:e.status,date:new Date(e.created_at).toLocaleDateString()})))}catch(s){}finally{v(!1)}},new Promise((e,l)=>{var i=e=>{try{d(a.next(e))}catch(s){l(s)}},r=e=>{try{d(a.throw(e))}catch(s){l(s)}},d=s=>s.done?e(s.value):Promise.resolve(s.value).then(i,r);d((a=a.apply(s,t)).next())});var s,t,a};return N?s.jsx(r,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),s.jsx("p",{className:"text-gray-300 mt-4",children:"Loading dashboard..."})]})})}):s.jsx(r,{children:s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("div",{className:"bg-slate-800/50 border-b border-white/10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Agent Dashboard"}),s.jsx("p",{className:"text-gray-300 mt-2",children:"Overview of your traders and commissions"})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300",children:"Total Traders"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:h.totalTraders}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[h.activeTraders," active"]})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(d,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300",children:"Total Commissions"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",h.totalCommissions.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-gray-300 mt-1",children:["$",h.pendingCommissions," pending"]})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(n,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300",children:"Active Challenges"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:h.activeChallenges}),s.jsxs("p",{className:"text-xs text-gray-300 mt-1",children:[h.passedChallenges," passed"]})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(c,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300",children:"Funded Accounts"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:h.fundedAccounts}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[(h.fundedAccounts/h.passedChallenges*100).toFixed(1),"% success rate"]})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(m,{className:"w-6 h-6 text-yellow-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(t,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Passed"})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:h.passedChallenges}),s.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:h.passedChallenges/(h.passedChallenges+h.failedChallenges+h.activeChallenges)*100+"%"}})})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(x,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"In Progress"})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:h.activeChallenges}),s.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:h.activeChallenges/(h.passedChallenges+h.failedChallenges+h.activeChallenges)*100+"%"}})})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(a,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Failed"})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:h.failedChallenges}),s.jsx("div",{className:"mt-2 w-full bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:h.failedChallenges/(h.passedChallenges+h.failedChallenges+h.activeChallenges)*100+"%"}})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Traders"}),s.jsxs(i,{to:"/agent/traders",className:"text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center gap-1",children:["View All",s.jsx(o,{className:"w-4 h-4"})]})]}),s.jsx("div",{className:"space-y-4",children:j.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:s.jsx(d,{className:"w-5 h-5 text-primary-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:e.name}),s.jsx("p",{className:"text-sm text-gray-300",children:e.program})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("funded"===e.status?"bg-yellow-100 text-yellow-800":"active"===e.status?"bg-green-100 text-green-800":"bg-slate-700/50 text-gray-100"),children:e.status}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.enrolled})]})]},e.id))})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Commissions"}),s.jsxs(i,{to:"/agent/commissions",className:"text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center gap-1",children:["View All",s.jsx(o,{className:"w-4 h-4"})]})]}),s.jsx("div",{className:"space-y-4",children:u.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(n,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:e.trader}),s.jsx("p",{className:"text-sm text-gray-300 capitalize",children:e.type.replace("_"," ")})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-white",children:["$",e.amount]}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.date})]})]},e.id))})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(i,{to:"/agent/traders",className:"card hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(d,{className:"w-8 h-8 text-primary-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Manage Traders"}),s.jsx("p",{className:"text-sm text-gray-300",children:"View and track your traders"})]})]})}),s.jsx(i,{to:"/agent/commissions",className:"card hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(n,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"View Commissions"}),s.jsx("p",{className:"text-sm text-gray-300",children:"Track your earnings"})]})]})}),s.jsx(i,{to:"/agent/reports",className:"card hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"View Reports"}),s.jsx("p",{className:"text-sm text-gray-300",children:"Analytics and insights"})]})]})})]})]})]})})}export{h as default};
