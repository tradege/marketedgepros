var e=(e,s,t)=>new Promise((r,l)=>{var a=e=>{try{n(t.next(e))}catch(s){l(s)}},i=e=>{try{n(t.throw(e))}catch(s){l(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,s)).next())});import{c as s,u as t,A as r,R as l,j as a,a as i}from"./index-CG8H-s3H.js";import{b as n}from"./react-vendor-DX2RpXDf.js";import d from"./UserLayout-Q4i8n_lh.js";import{a as c}from"./utils-BqmvKC_F.js";import{T as o}from"./trophy-BVEEp2gl.js";import{T as x}from"./trending-up-CaF3Nn3W.js";import{T as m}from"./target-D72lbRbz.js";import{L as h}from"./lock-CHkO59KP.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=s("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),p=()=>{const{user:s}=t(),[i,o]=n.useState(!0),[x,m]=n.useState(null),[h,g]=n.useState([]),[p,j]=n.useState(null),f=s&&r.includes(s.role),N=s&&s.role===l.AFFILIATE,y=s&&s.role===l.TRADER;n.useEffect(()=>{v()},[s]);const v=()=>e(null,null,function*(){var e,s;try{o(!0);const e=localStorage.getItem("access_token");if(!e)return j("Authentication required. Please log in."),void o(!1);const s={headers:{Authorization:`Bearer ${e}`}};if(y){const e=yield c.get("/api/v1/scaling/my-progress",s);m(e.data.data)}else if(f||N){const e=yield c.get("/api/v1/scaling/admin/all-users",s);g(e.data.data||[])}o(!1)}catch(t){j((null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.error)||"Failed to load scaling data"),o(!1)}}),w=()=>e(null,null,function*(){var e,s;try{const e={headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}};yield c.post("/api/v1/scaling/scale-up",{},e),alert("Successfully scaled up to next tier!"),v()}catch(t){alert((null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.error)||"Failed to scale up")}});return i?a.jsx(d,{children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Loading scaling data..."})]})})}):p?a.jsx(d,{children:a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-400",children:p})})}):y?a.jsx(u,{scalingData:x,onScaleUp:w}):f||N?a.jsx(b,{users:h,isAffiliate:N}):a.jsx(d,{children:a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-400",children:"No scaling data available for your role."})})})},u=({scalingData:e,onScaleUp:s})=>{var t,r,l,n,c;if(!e)return a.jsx(d,{children:a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-400",children:"No scaling plan found. Contact support to initialize your scaling plan."})})});const p=e.tiers||[];p.find(s=>s.tier_number===e.current_tier);const u=p.find(s=>s.tier_number===e.next_tier);return a.jsx(d,{children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Account Scaling Progress"}),a.jsx("p",{className:"text-gray-400",children:"Track your progress and scale up to larger account sizes"})]}),a.jsx("div",{className:"bg-gradient-to-r from-cyan-500/10 to-teal-500/10 border border-white/10 rounded-2xl p-6 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Current Tier"}),a.jsxs("h2",{className:"text-4xl font-bold text-white",children:["Tier ",e.current_tier]}),a.jsxs("p",{className:"text-cyan-400 text-2xl font-semibold mt-2",children:["$",null==(t=e.current_account_size)?void 0:t.toLocaleString()]})]}),a.jsx(o,{className:"w-16 h-16 text-cyan-400"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(x,{className:"w-5 h-5 text-green-400"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Total Profit"})]}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(null==(r=e.total_profit)?void 0:r.toLocaleString())||"0"]})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(m,{className:"w-5 h-5 text-cyan-400"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Target Profit"})]}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(null==(l=e.target_profit)?void 0:l.toLocaleString())||"0"]})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(o,{className:"w-5 h-5 text-yellow-400"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Times Scaled"})]}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.times_scaled||0})]})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("p",{className:"text-white font-semibold",children:"Progress to Next Tier"}),a.jsxs("p",{className:"text-cyan-400 font-bold",children:[(null==(n=e.progress_percentage)?void 0:n.toFixed(1))||"0","%"]})]}),a.jsx("div",{className:"w-full bg-white/10 rounded-full h-4 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-teal-500 transition-all duration-500 ease-out",style:{width:`${Math.min(e.progress_percentage||0,100)}%`}})}),u&&a.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Next: Tier ",u.tier_number," - $",null==(c=u.account_size)?void 0:c.toLocaleString()]})]}),e.is_eligible_for_scaling&&a.jsx("div",{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 rounded-xl p-6 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"ðŸŽ‰ Congratulations!"}),a.jsxs("p",{className:"text-gray-300",children:["You're eligible to scale up to Tier ",e.next_tier,"!"]})]}),a.jsxs("button",{onClick:s,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full font-semibold text-white hover:shadow-lg hover:shadow-green-500/50 transition-all duration-300 flex items-center gap-2",children:[a.jsx(g,{className:"w-5 h-5"}),"Scale Up Now"]})]})}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 backdrop-blur-sm",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"All Tiers"}),a.jsx("div",{className:"space-y-3",children:p.map(s=>{var t,r;const l=s.tier_number===e.current_tier,n=s.tier_number<e.current_tier,d=s.tier_number>e.current_tier;return a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border "+(l?"bg-cyan-500/10 border-cyan-500/30":n?"bg-green-500/10 border-green-500/30":"bg-white/5 border-white/10"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[n&&a.jsx(i,{className:"w-5 h-5 text-green-400"}),l&&a.jsx(o,{className:"w-5 h-5 text-cyan-400"}),d&&a.jsx(h,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold "+(l?"text-cyan-400":"text-white"),children:["Tier ",s.tier_number]}),a.jsxs("p",{className:"text-gray-400 text-sm",children:["$",null==(t=s.account_size)?void 0:t.toLocaleString()," Account"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:["$",null==(r=s.profit_target)?void 0:r.toLocaleString()]}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[s.profit_split,"% Split"]})]})]},s.tier_number)})})]})]})})},b=({users:e,isAffiliate:s})=>{const[t,r]=n.useState(""),l=e.filter(e=>{var s,r;return(null==(s=e.email)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(r=e.name)?void 0:r.toLowerCase().includes(t.toLowerCase()))}),i={totalUsers:e.length,eligibleForScaling:e.filter(e=>e.is_eligible_for_scaling).length,averageProgress:e.length>0?(e.reduce((e,s)=>e+(s.progress_percentage||0),0)/e.length).toFixed(1):0,totalScaled:e.reduce((e,s)=>e+(s.times_scaled||0),0)};return a.jsx(d,{children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:[s?"My Traders":"All Traders"," Scaling Progress"]}),a.jsx("p",{className:"text-gray-400",children:"Monitor and manage trader scaling progress"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Traders"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:i.totalUsers})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Eligible for Scaling"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:i.eligibleForScaling})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Avg Progress"}),a.jsxs("p",{className:"text-2xl font-bold text-cyan-400",children:[i.averageProgress,"%"]})]}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Scaled"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:i.totalScaled})]})]}),a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-sm",children:a.jsx("input",{type:"text",placeholder:"Search by email or name...",value:t,onChange:e=>r(e.target.value),className:"w-full bg-transparent text-white placeholder-gray-400 focus:outline-none"})}),a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Trader"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Current Tier"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Account Size"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Progress"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Profit"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Times Scaled"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:l.map((e,s)=>{var t,r,l,i;return a.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.name||"N/A"}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email})]})}),a.jsxs("td",{className:"px-4 py-3 text-white",children:["Tier ",e.current_tier]}),a.jsxs("td",{className:"px-4 py-3 text-cyan-400 font-semibold",children:["$",null==(t=e.current_account_size)?void 0:t.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-teal-500 rounded-full",style:{width:`${Math.min(e.progress_percentage||0,100)}%`}})}),a.jsxs("span",{className:"text-gray-300 text-sm",children:[null==(r=e.progress_percentage)?void 0:r.toFixed(0),"%"]})]})}),a.jsxs("td",{className:"px-4 py-3 text-white",children:["$",null==(l=e.total_profit)?void 0:l.toLocaleString()," / $",null==(i=e.target_profit)?void 0:i.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3 text-yellow-400 font-semibold",children:e.times_scaled||0}),a.jsx("td",{className:"px-4 py-3",children:e.is_eligible_for_scaling?a.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-semibold",children:"Eligible"}):a.jsx("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 rounded-full text-xs",children:"In Progress"})})]},s)})})]})}),0===l.length&&a.jsx("div",{className:"p-8 text-center text-gray-400",children:"No traders found"})]})]})})};export{p as default};
