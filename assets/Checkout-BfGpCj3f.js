var e=(e,s,t)=>new Promise((a,r)=>{var l=e=>{try{c(t.next(e))}catch(s){r(s)}},n=e=>{try{c(t.throw(e))}catch(s){r(s)}},c=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);c((t=t.apply(e,s)).next())});import{j as s,a as t}from"./index-ClO6sKb2.js";import{h as a,u as r,b as l}from"./react-vendor-DX2RpXDf.js";import{a as n}from"./utils-BqmvKC_F.js";import{C as c,a as d}from"./copy-CPg5Inq7.js";import{E as i}from"./external-link-DmUoewpu.js";import{P as o}from"./plus-C9bHLG5_.js";import{C as m}from"./credit-card-DRjCw_E2.js";import{L as x}from"./lock-DnGBmz-v.js";const h=()=>{var h;const{programId:u}=a(),j=r(),[p,b]=l.useState(null),[f,y]=l.useState([]),[N,g]=l.useState([]),[v,w]=l.useState(!0),[S,k]=l.useState(!1),[_,P]=l.useState(""),[C,$]=l.useState("card"),[T,F]=l.useState(null),[A,I]=l.useState(null);l.useEffect(()=>{D()},[u]),l.useEffect(()=>{let e;return T&&T.payment_id&&(e=setInterval(()=>{E(T.payment_id)},1e4)),()=>{e&&clearInterval(e)}},[T]);const D=()=>e(null,null,function*(){try{const e=yield n.get(`undefined/api/v1/programs/${u}`);b(e.data),y(e.data.addons||[]),w(!1)}catch(e){P("Failed to load program details"),w(!1)}}),L=()=>{if(!p)return 0;let e=parseFloat(p.price);return N.forEach(s=>{const t=f.find(e=>e.id===s);t&&(e+=parseFloat(t.price))}),e},z=()=>e(null,null,function*(){var e,s;k(!0),P("");try{const e=localStorage.getItem("access_token");if(!e)return void j("/login",{state:{from:`/programs/${u}/checkout`}});const s=yield n.post("undefined/api/payments/create-checkout",{program_id:u,addon_ids:N},{headers:{Authorization:`Bearer ${e}`}});s.data.checkout_url?window.location.href=s.data.checkout_url:(P("Failed to create checkout session"),k(!1))}catch(t){P((null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.message)||"Failed to process checkout"),k(!1)}}),B=()=>e(null,null,function*(){var e,s;k(!0),P("");try{const e=localStorage.getItem("access_token");if(!e)return void j("/login",{state:{from:`/programs/${u}/checkout`}});const s=localStorage.getItem("user_email")||"user@example.com",t=L(),a=yield n.post("undefined/api/crypto/create-payment",{program_id:u,addon_ids:N,amount:t,email:s,order_id:`order_${u}_${Date.now()}`},{headers:{Authorization:`Bearer ${e}`}});a.data.success?(F(a.data),k(!1)):(P("Failed to create crypto payment"),k(!1))}catch(t){P((null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.error)||"Failed to process crypto payment"),k(!1)}}),E=s=>e(null,null,function*(){try{const e=localStorage.getItem("access_token"),t=yield n.get(`undefined/api/crypto/payment-status/${s}`,{headers:{Authorization:`Bearer ${e}`}});t.data.status&&(I(t.data.status),"finished"===t.data.status&&setTimeout(()=>{j("/dashboard")},2e3))}catch(e){}});return v?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):p?T?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-12 px-4",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-8 border border-slate-700",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Complete Your USDT Payment"}),"finished"===A?s.jsxs("div",{className:"bg-green-500/10 border border-green-500 rounded-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-center text-green-400 mb-2",children:[s.jsx(t,{className:"mr-2 text-3xl"}),s.jsx("span",{className:"text-2xl font-bold",children:"Payment Successful!"})]}),s.jsx("p",{className:"text-center text-gray-300",children:"Redirecting to dashboard..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500 rounded-lg p-6 mb-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("p",{className:"text-gray-300 mb-2",children:"Send exactly"}),s.jsxs("p",{className:"text-4xl font-bold text-cyan-400",children:[T.pay_amount," USDT"]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"TRC20 (Tron Network)"})]}),s.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Payment Address:"}),s.jsxs("div",{className:"flex items-center justify-between bg-slate-800 rounded p-3",children:[s.jsx("p",{className:"text-white font-mono text-sm break-all mr-2",children:T.pay_address}),s.jsx("button",{onClick:()=>{return e=T.pay_address,void navigator.clipboard.writeText(e);var e},className:"text-cyan-400 hover:text-cyan-300 flex-shrink-0",children:s.jsx(c,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Payment ID: ",T.payment_id]}),A&&s.jsxs("p",{className:"text-sm text-cyan-400",children:["Status: ",A]})]})]}),s.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-yellow-400 font-semibold mb-2",children:"⚠️ Important Instructions:"}),s.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[s.jsx("li",{children:"• Send ONLY USDT (TRC20) to this address"}),s.jsx("li",{children:"• Send the EXACT amount shown above"}),s.jsx("li",{children:"• Use Tron (TRC20) network - fees are ~$0-$1"}),s.jsx("li",{children:"• Payment will be confirmed automatically"}),s.jsx("li",{children:"• Do not close this page until payment is confirmed"})]})]}),T.payment_url&&s.jsxs("a",{href:T.payment_url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-cyan-500 text-white py-3 rounded-lg font-bold flex items-center justify-center hover:bg-cyan-600 transition mb-4",children:["Open Payment Page",s.jsx(i,{className:"ml-2 w-5 h-5"})]})]}),s.jsx("button",{onClick:()=>{F(null),I(null)},className:"w-full bg-slate-700 text-white py-3 rounded-lg font-bold hover:bg-slate-600 transition",children:"Cancel Payment"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-12 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Complete Your Purchase"}),s.jsx("p",{className:"text-gray-400",children:"You're one step away from getting funded!"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Program Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-2",children:p.name}),s.jsx("p",{className:"text-gray-400",children:p.description})]}),s.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Account Size"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",null==(h=p.account_size)?void 0:h.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Profit Target"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:[p.profit_target,"%"]})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Max Daily Loss"}),s.jsxs("span",{className:"text-red-400 font-semibold",children:[p.max_daily_loss,"%"]})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Profit Split"}),s.jsxs("span",{className:"text-cyan-400 font-semibold",children:[p.profit_split,"%"]})]}),s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Base Price"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",p.price]})]})]}),f&&f.length>0&&s.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[s.jsx(o,{className:"mr-2 text-cyan-400"}),"Optional Add-ons"]}),s.jsx("div",{className:"space-y-2",children:f.map(e=>s.jsx("div",{onClick:()=>{return s=e.id,void g(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"cursor-pointer p-3 rounded-lg border transition-all "+(N.includes(e.id)?"bg-cyan-500/20 border-cyan-500":"bg-slate-900/50 border-slate-700 hover:border-slate-600"),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center mr-2 "+(N.includes(e.id)?"bg-cyan-500 border-cyan-500":"border-slate-600"),children:N.includes(e.id)&&s.jsx(d,{className:"w-3 h-3 text-white"})}),s.jsx("span",{className:"font-semibold text-white",children:e.name})]}),s.jsx("p",{className:"text-sm text-gray-400 ml-7 mt-1",children:e.description})]}),s.jsxs("span",{className:"text-cyan-400 font-bold ml-2",children:["+$",e.price]})]})},e.id))})]}),s.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xl font-bold text-white",children:"Total"}),s.jsxs("span",{className:"text-3xl font-bold text-cyan-400",children:["$",L().toFixed(2)]})]}),N.length>0&&s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Base: $",p.price," + Add-ons: $",(L()-parseFloat(p.price)).toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One-time payment"})]})]}),s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-green-400",children:[s.jsx(t,{className:"mr-2"}),s.jsx("span",{children:"Instant Account Activation"})]}),s.jsxs("div",{className:"flex items-center text-green-400",children:[s.jsx(t,{className:"mr-2"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center text-green-400",children:[s.jsx(t,{className:"mr-2"}),s.jsx("span",{children:"Fast Payouts"})]}),s.jsxs("div",{className:"flex items-center text-green-400",children:[s.jsx(t,{className:"mr-2"}),s.jsx("span",{children:"No Hidden Fees"})]})]})]}),s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Payment Method"}),_&&s.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-4",children:_}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsx("div",{onClick:()=>$("card"),className:"cursor-pointer p-4 rounded-lg border-2 transition-all "+("card"===C?"border-cyan-500 bg-cyan-500/10":"border-slate-700 hover:border-slate-600"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(m,{className:"text-cyan-400 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:"Credit / Debit Card"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Visa, Mastercard, Amex"})]})]}),s.jsx("div",{className:"w-5 h-5 rounded-full border-2 "+("card"===C?"border-cyan-500 bg-cyan-500":"border-slate-600"),children:"card"===C&&s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]})}),s.jsx("div",{onClick:()=>$("crypto"),className:"cursor-pointer p-4 rounded-lg border-2 transition-all "+("crypto"===C?"border-cyan-500 bg-cyan-500/10":"border-slate-700 hover:border-slate-600"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-2xl mr-3",children:"₮"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:"USDT (TRC20)"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Cryptocurrency - Low fees (~$1)"})]})]}),s.jsx("div",{className:"w-5 h-5 rounded-full border-2 "+("crypto"===C?"border-cyan-500 bg-cyan-500":"border-slate-600"),children:"crypto"===C&&s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]})})]}),s.jsx("button",{onClick:()=>e(null,null,function*(){"card"===C?z():"crypto"===C&&B()}),disabled:S,className:"w-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white py-4 rounded-lg font-bold text-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:S?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(x,{className:"mr-2"}),"Proceed to Secure Checkout"]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-center text-gray-400 text-sm",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),"Secure SSL encrypted payment"]})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Program not found"})})};export{h as default};
